var ma=Object.defineProperty;var Ai=r=>{throw TypeError(r)};var ya=(r,e,t)=>e in r?ma(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Oe=(r,e,t)=>ya(r,typeof e!="symbol"?e+"":e,t),on=(r,e,t)=>e.has(r)||Ai("Cannot "+t);var C=(r,e,t)=>(on(r,e,"read from private field"),t?t.call(r):e.get(r)),ne=(r,e,t)=>e.has(r)?Ai("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),$e=(r,e,t,n)=>(on(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),be=(r,e,t)=>(on(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const wa="5";var yo;typeof window<"u"&&((yo=window.__svelte??(window.__svelte={})).v??(yo.v=new Set)).add(wa);let Mt=!1,ba=!1;function Ea(){Mt=!0}Ea();const _a=1,Aa=2,xa=16,Ta=2,Sa=4,Ca=8,Ra=1,ka=2,J=Symbol(),wo=!1;var bo=Array.isArray,Da=Array.prototype.indexOf,Eo=Array.from,_o=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertyDescriptors,Na=Object.prototype,Fa=Array.prototype,Ao=Object.getPrototypeOf;const et=()=>{};function Ga(r){return r()}function Rr(r){for(var e=0;e<r.length;e++)r[e]()}function xo(){var r,e,t=new Promise((n,i)=>{r=n,e=i});return{promise:t,resolve:r,reject:e}}const ee=2,Hn=4,Vr=8,je=16,Ve=32,It=64,Wn=128,X=1024,ae=2048,Ie=4096,fe=8192,ze=16384,jn=32768,Qt=65536,xi=1<<17,Pa=1<<18,Kr=1<<19,To=1<<20,ve=256,kr=512,Dr=32768,_n=1<<21,Vn=1<<22,dt=1<<23,ft=Symbol("$state"),Ma=Symbol("legacy props"),_t=new class extends Error{constructor(){super(...arguments);Oe(this,"name","StaleReactionError");Oe(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function So(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ia(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Oa(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $a(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ua(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Ba(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function za(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ha(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ja(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Va=!1;function Co(r){return r===this.v}function Ro(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ko(r){return!Ro(r,this.v)}let W=null;function Lr(r){W=r}function Do(r,e=!1,t){W={p:W,i:!1,c:null,e:null,s:r,x:null,l:Mt&&!e?{s:null,u:null,$:[]}:null}}function Lo(r){var e=W,t=e.e;if(t!==null){e.e=null;for(var n of t)Wo(n)}return e.i=!0,W=e.p,{}}function or(){return!Mt||W!==null&&W.l===null}let ht=[];function No(){var r=ht;ht=[],Rr(r)}function Kn(r){if(ht.length===0&&!Zt){var e=ht;queueMicrotask(()=>{e===ht&&No()})}ht.push(r)}function Ka(){for(;ht.length>0;)No()}function Ya(r){var e=F;if(e===null)return N.f|=dt,r;if(e.f&jn)Nr(r,e);else{if(!(e.f&Wn))throw r;e.b.error(r)}}function Nr(r,e){for(;e!==null;){if(e.f&Wn)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r}const pr=new Set;let $=null,Tr=null,Y=null,Ti=new Set,De=[],Yr=null,An=!1,Zt=!1;var Rt,kt,lt,ct,rr,Dt,Lt,Q,xn,at,Fo,Go;const Wr=class Wr{constructor(){ne(this,Q);Oe(this,"committed",!1);Oe(this,"current",new Map);Oe(this,"previous",new Map);ne(this,Rt,new Set);ne(this,kt,new Set);ne(this,lt,0);ne(this,ct,0);ne(this,rr,null);ne(this,Dt,[]);ne(this,Lt,[]);Oe(this,"skipped_effects",new Set);Oe(this,"is_fork",!1)}process(e){De=[],Tr=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of e)be(this,Q,xn).call(this,n,t);this.is_fork||be(this,Q,Fo).call(this),C(this,ct)>0||this.is_fork?(be(this,Q,at).call(this,t.effects),be(this,Q,at).call(this,t.render_effects),be(this,Q,at).call(this,t.block_effects)):(Tr=this,$=null,Si(t.render_effects),Si(t.effects),Tr=null),Y=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),this.current.set(e,e.v),Y==null||Y.set(e,e.v)}activate(){$=this}deactivate(){$=null,Y=null}flush(){if(this.activate(),De.length>0){if(Po(),$!==null&&$!==this)return}else C(this,lt)===0&&this.process([]);this.deactivate();for(const e of Ti)if(Ti.delete(e),e(),$!==null)break}discard(){for(const e of C(this,kt))e(this);C(this,kt).clear()}increment(e){$e(this,lt,C(this,lt)+1),e&&$e(this,ct,C(this,ct)+1)}decrement(e){$e(this,lt,C(this,lt)-1),e&&$e(this,ct,C(this,ct)-1),this.revive()}revive(){for(const e of C(this,Dt))Z(e,ae),pt(e);for(const e of C(this,Lt))Z(e,Ie),pt(e);$e(this,Dt,[]),$e(this,Lt,[]),this.flush()}oncommit(e){C(this,Rt).add(e)}ondiscard(e){C(this,kt).add(e)}settled(){return(C(this,rr)??$e(this,rr,xo())).promise}static ensure(){if($===null){const e=$=new Wr;pr.add($),Zt||Wr.enqueue(()=>{$===e&&e.flush()})}return $}static enqueue(e){Kn(e)}apply(){}};Rt=new WeakMap,kt=new WeakMap,lt=new WeakMap,ct=new WeakMap,rr=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Q=new WeakSet,xn=function(e,t){var l;e.f^=X;for(var n=e.first;n!==null;){var i=n.f,o=(i&(Ve|It))!==0,s=o&&(i&X)!==0,a=s||(i&fe)!==0||this.skipped_effects.has(n);if(n.f&Wn&&((l=n.b)!=null&&l.is_pending())&&(t={parent:t,effect:n,effects:[],render_effects:[],block_effects:[]}),!a&&n.fn!==null){o?n.f^=X:i&Hn?t.effects.push(n):Ot(n)&&(n.f&je&&t.block_effects.push(n),Nt(n));var u=n.first;if(u!==null){n=u;continue}}var h=n.parent;for(n=n.next;n===null&&h!==null;)h===t.effect&&(be(this,Q,at).call(this,t.effects),be(this,Q,at).call(this,t.render_effects),be(this,Q,at).call(this,t.block_effects),t=t.parent),n=h.next,h=h.parent}},at=function(e){for(const t of e)(t.f&ae?C(this,Dt):C(this,Lt)).push(t),Z(t,X)},Fo=function(){if(C(this,ct)===0){for(const e of C(this,Rt))e();C(this,Rt).clear()}C(this,lt)===0&&be(this,Q,Go).call(this)},Go=function(){var i,o;if(pr.size>1){this.previous.clear();var e=Y,t=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of pr){if(s===this){t=!1;continue}const a=[];for(const[h,l]of this.current){if(s.current.has(h))if(t&&l!==s.current.get(h))s.current.set(h,l);else continue;a.push(h)}if(a.length===0)continue;const u=[...s.current.keys()].filter(h=>!this.current.has(h));if(u.length>0){const h=new Set,l=new Map;for(const c of a)Mo(c,u,h,l);if(De.length>0){$=s,s.apply();for(const c of De)be(i=s,Q,xn).call(i,c,n);De=[],s.deactivate()}}}$=null,Y=e}this.committed=!0,pr.delete(this),(o=C(this,rr))==null||o.resolve()};let Fr=Wr;function qa(r){var e=Zt;Zt=!0;try{for(var t;;){if(Ka(),De.length===0&&($==null||$.flush(),De.length===0))return Yr=null,t;Po()}}finally{Zt=e}}function Po(){var r=Tt;An=!0;try{var e=0;for(Di(!0);De.length>0;){var t=Fr.ensure();if(e++>1e3){var n,i;Xa()}t.process(De),tt.clear()}}finally{An=!1,Di(r),Yr=null}}function Xa(){try{Ba()}catch(r){Nr(r,Yr)}}let _e=null;function Si(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var n=r[t++];if(!(n.f&(ze|fe))&&Ot(n)&&(_e=new Set,Nt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Yo(n):n.fn=null),(_e==null?void 0:_e.size)>0)){tt.clear();for(const i of _e){if(i.f&(ze|fe))continue;const o=[i];let s=i.parent;for(;s!==null;)_e.has(s)&&(_e.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const u=o[a];u.f&(ze|fe)||Nt(u)}}_e.clear()}}_e=null}}function Mo(r,e,t,n){if(!t.has(r)&&(t.add(r),r.reactions!==null))for(const i of r.reactions){const o=i.f;o&ee?Mo(i,e,t,n):o&(Vn|je)&&!(o&ae)&&Io(i,e,n)&&(Z(i,ae),pt(i))}}function Io(r,e,t){const n=t.get(r);if(n!==void 0)return n;if(r.deps!==null)for(const i of r.deps){if(e.includes(i))return!0;if(i.f&ee&&Io(i,e,t))return t.set(i,!0),!0}return t.set(r,!1),!1}function pt(r){for(var e=Yr=r;e.parent!==null;){e=e.parent;var t=e.f;if(An&&e===F&&t&je)return;if(t&(It|Ve)){if(!(t&X))return;e.f^=X}}De.push(e)}function Za(r,e,t){const n=or()?Yn:qn;if(e.length===0){t(r.map(n));return}var i=$,o=F,s=Ja();Promise.all(e.map(a=>Qa(a))).then(a=>{s();try{t([...r.map(n),...a])}catch(u){o.f&ze||Nr(u,o)}i==null||i.deactivate(),Tn()}).catch(a=>{Nr(a,o)})}function Ja(){var r=F,e=N,t=W,n=$;return function(){rt(r),Pe(e),Lr(t),n==null||n.activate()}}function Tn(){rt(null),Pe(null),Lr(null)}function Yn(r){var e=ee|ae,t=N!==null&&N.f&ee?N:null;return F===null||t!==null&&t.f&ve?e|=ve:F.f|=Kr,{ctx:W,deps:null,effects:null,equals:Co,f:e,fn:r,reactions:null,rv:0,v:J,wv:0,parent:t??F,ac:null}}function Qa(r,e){let t=F;t===null&&Ia();var n=t.b,i=void 0,o=er(J),s=!N,a=new Map;return fu(()=>{var d;var u=xo();i=u.promise;try{Promise.resolve(r()).then(u.resolve,u.reject).then(()=>{h===$&&h.committed&&h.deactivate(),Tn()})}catch(f){u.reject(f),Tn()}var h=$;if(s){var l=!n.is_pending();n.update_pending_count(1),h.increment(l),(d=a.get(h))==null||d.reject(_t),a.delete(h),a.set(h,u)}const c=(f,g=void 0)=>{if(h.activate(),g)g!==_t&&(o.f|=dt,Gr(o,g));else{o.f&dt&&(o.f^=dt),Gr(o,f);for(const[p,v]of a){if(a.delete(p),p===h)break;v.reject(_t)}}s&&(n.update_pending_count(-1),h.decrement(l))};u.promise.then(c,f=>c(null,f||"unknown"))}),Zn(()=>{for(const u of a.values())u.reject(_t)}),new Promise(u=>{function h(l){function c(){l===i?u(o):h(i)}l.then(c,c)}h(i)})}function qn(r){const e=Yn(r);return e.equals=ko,e}function Oo(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Fe(e[t])}}function eu(r){for(var e=r.parent;e!==null;){if(!(e.f&ee))return e;e=e.parent}return null}function Xn(r){var e,t=F;rt(eu(r));try{r.f&=~Dr,Oo(r),e=ts(r)}finally{rt(t)}return e}function $o(r){var e=Xn(r);if(r.equals(e)||(r.v=e,r.wv=Qo()),!mt)if(Y!==null)Y.set(r,r.v);else{var t=(Qe||r.f&ve)&&r.deps!==null?Ie:X;Z(r,t)}}let Sn=new Set;const tt=new Map;let Uo=!1;function er(r,e){var t={f:0,v:r,reactions:null,equals:Co,rv:0,wv:0};return t}function Ze(r,e){const t=er(r);return mu(t),t}function xt(r,e=!1,t=!0){var i;const n=er(r);return e||(n.equals=ko),Mt&&t&&W!==null&&W.l!==null&&((i=W.l).s??(i.s=[])).push(n),n}function ce(r,e,t=!1){N!==null&&(!Le||N.f&xi)&&or()&&N.f&(ee|je|Vn|xi)&&!(oe!=null&&oe.includes(r))&&ja();let n=t?At(e):e;return Gr(r,n)}function Gr(r,e){if(!r.equals(e)){var t=r.v;mt?tt.set(r,e):tt.set(r,t),r.v=e;var n=Fr.ensure();n.capture(r,t),r.f&ee&&(r.f&ae&&Xn(r),Z(r,r.f&ve?Ie:X)),r.wv=Qo(),Bo(r,ae),or()&&F!==null&&F.f&X&&!(F.f&(Ve|It))&&(pe===null?yu([r]):pe.push(r)),!n.is_fork&&Sn.size>0&&!Uo&&tu()}return e}function tu(){Uo=!1;const r=Array.from(Sn);for(const e of r)e.f&X&&Z(e,Ie),Ot(e)&&Nt(e);Sn.clear()}function sn(r){ce(r,r.v+1)}function Bo(r,e){var t=r.reactions;if(t!==null)for(var n=or(),i=t.length,o=0;o<i;o++){var s=t[o],a=s.f;if(!(!n&&s===F)){var u=(a&ae)===0;u&&Z(s,e),a&ee?a&Dr||(s.f|=Dr,Bo(s,Ie)):u&&(a&je&&_e!==null&&_e.add(s),pt(s))}}}function At(r){if(typeof r!="object"||r===null||ft in r)return r;const e=Ao(r);if(e!==Na&&e!==Fa)return r;var t=new Map,n=bo(r),i=Ze(0),o=gt,s=a=>{if(gt===o)return a();var u=N,h=gt;Pe(null),Ni(o);var l=a();return Pe(u),Ni(h),l};return n&&t.set("length",Ze(r.length)),new Proxy(r,{defineProperty(a,u,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&Ha();var l=t.get(u);return l===void 0?l=s(()=>{var c=Ze(h.value);return t.set(u,c),c}):ce(l,h.value,!0),!0},deleteProperty(a,u){var h=t.get(u);if(h===void 0){if(u in a){const l=s(()=>Ze(J));t.set(u,l),sn(i)}}else ce(h,J),sn(i);return!0},get(a,u,h){var f;if(u===ft)return r;var l=t.get(u),c=u in a;if(l===void 0&&(!c||(f=xr(a,u))!=null&&f.writable)&&(l=s(()=>{var g=At(c?a[u]:J),p=Ze(g);return p}),t.set(u,l)),l!==void 0){var d=U(l);return d===J?void 0:d}return Reflect.get(a,u,h)},getOwnPropertyDescriptor(a,u){var h=Reflect.getOwnPropertyDescriptor(a,u);if(h&&"value"in h){var l=t.get(u);l&&(h.value=U(l))}else if(h===void 0){var c=t.get(u),d=c==null?void 0:c.v;if(c!==void 0&&d!==J)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return h},has(a,u){var d;if(u===ft)return!0;var h=t.get(u),l=h!==void 0&&h.v!==J||Reflect.has(a,u);if(h!==void 0||F!==null&&(!l||(d=xr(a,u))!=null&&d.writable)){h===void 0&&(h=s(()=>{var f=l?At(a[u]):J,g=Ze(f);return g}),t.set(u,h));var c=U(h);if(c===J)return!1}return l},set(a,u,h,l){var y;var c=t.get(u),d=u in a;if(n&&u==="length")for(var f=h;f<c.v;f+=1){var g=t.get(f+"");g!==void 0?ce(g,J):f in a&&(g=s(()=>Ze(J)),t.set(f+"",g))}if(c===void 0)(!d||(y=xr(a,u))!=null&&y.writable)&&(c=s(()=>Ze(void 0)),ce(c,At(h)),t.set(u,c));else{d=c.v!==J;var p=s(()=>At(h));ce(c,p)}var v=Reflect.getOwnPropertyDescriptor(a,u);if(v!=null&&v.set&&v.set.call(l,h),!d){if(n&&typeof u=="string"){var w=t.get("length"),m=Number(u);Number.isInteger(m)&&m>=w.v&&ce(w,m+1)}sn(i)}return!0},ownKeys(a){U(i);var u=Reflect.ownKeys(a).filter(c=>{var d=t.get(c);return d===void 0||d.v!==J});for(var[h,l]of t)l.v!==J&&!(h in a)&&u.push(h);return u},setPrototypeOf(){Wa()}})}var ru,nu,iu;function Pr(r=""){return document.createTextNode(r)}function Mr(r){return nu.call(r)}function sr(r){return iu.call(r)}function ot(r,e){return Mr(r)}function ou(r,e=!1){{var t=Mr(r);return t instanceof Comment&&t.data===""?sr(t):t}}function vr(r,e=1,t=!1){let n=r;for(;e--;)n=sr(n);return n}function su(r){r.textContent=""}function zo(){return!1}let Ci=!1;function au(){Ci||(Ci=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function qr(r){var e=N,t=F;Pe(null),rt(null);try{return r()}finally{Pe(e),rt(t)}}function uu(r,e,t,n=t){r.addEventListener(e,()=>qr(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),au()}function Ho(r){F===null&&N===null&&Ua(),N!==null&&N.f&ve&&F===null&&$a(),mt&&Oa()}function hu(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Ke(r,e,t,n=!0){var i=F;i!==null&&i.f&fe&&(r|=fe);var o={ctx:W,deps:null,nodes_start:null,nodes_end:null,f:r|ae,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Nt(o),o.f|=jn}catch(u){throw Fe(o),u}else e!==null&&pt(o);if(n){var s=o;if(t&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&!(s.f&Kr)&&(s=s.first,r&je&&r&Qt&&s!==null&&(s.f|=Qt)),s!==null&&(s.parent=i,i!==null&&hu(s,i),N!==null&&N.f&ee&&!(r&It))){var a=N;(a.effects??(a.effects=[])).push(s)}}return o}function Zn(r){const e=Ke(Vr,null,!1);return Z(e,X),e.teardown=r,e}function Cn(r){Ho();var e=F.f,t=!N&&(e&Ve)!==0&&(e&jn)===0;if(t){var n=W;(n.e??(n.e=[])).push(r)}else return Wo(r)}function Wo(r){return Ke(Hn|To,r,!1)}function lu(r){return Ho(),Ke(Vr|To,r,!0)}function cu(r){return Ke(Hn,r,!1)}function Ri(r,e){var t=W,n={effect:null,ran:!1,deps:r};t.l.$.push(n),n.effect=Xr(()=>{r(),!n.ran&&(n.ran=!0,Se(e))})}function du(){var r=W;Xr(()=>{for(var e of r.l.$){e.deps();var t=e.effect;t.f&X&&Z(t,Ie),Ot(t)&&Nt(t),e.ran=!1}})}function fu(r){return Ke(Vn|Kr,r,!0)}function Xr(r,e=0){return Ke(Vr|e,r,!0)}function ki(r,e=[],t=[]){Za(e,t,n=>{Ke(Vr,()=>r(...n.map(U)),!0)})}function jo(r,e=0){var t=Ke(je|e,r,!0);return t}function Ir(r,e=!0){return Ke(Ve|Kr,r,!0,e)}function Vo(r){var e=r.teardown;if(e!==null){const t=mt,n=N;Li(!0),Pe(null);try{e.call(null)}finally{Li(t),Pe(n)}}}function Ko(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const i=t.ac;i!==null&&qr(()=>{i.abort(_t)});var n=t.next;t.f&It?t.parent=null:Fe(t,e),t=n}}function gu(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Ve||Fe(e),e=t}}function Fe(r,e=!0){var t=!1;(e||r.f&Pa)&&r.nodes_start!==null&&r.nodes_end!==null&&(pu(r.nodes_start,r.nodes_end),t=!0),Ko(r,e&&!t),Or(r,0),Z(r,ze);var n=r.transitions;if(n!==null)for(const o of n)o.stop();Vo(r);var i=r.parent;i!==null&&i.first!==null&&Yo(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function pu(r,e){for(;r!==null;){var t=r===e?null:sr(r);r.remove(),r=t}}function Yo(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function qo(r,e,t=!0){var n=[];Jn(r,n,!0),Xo(n,()=>{t&&Fe(r),e&&e()})}function Xo(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var i of r)i.out(n)}else e()}function Jn(r,e,t){if(!(r.f&fe)){if(r.f^=fe,r.transitions!==null)for(const s of r.transitions)(s.is_global||t)&&e.push(s);for(var n=r.first;n!==null;){var i=n.next,o=(n.f&Qt)!==0||(n.f&Ve)!==0&&(r.f&je)!==0;Jn(n,e,o?t:!1),n=i}}}function Qn(r){Zo(r,!0)}function Zo(r,e){if(r.f&fe){r.f^=fe,r.f&X||(Z(r,ae),pt(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&Qt)!==0||(t.f&Ve)!==0;Zo(t,i?e:!1),t=n}if(r.transitions!==null)for(const o of r.transitions)(o.is_global||e)&&o.in()}}function vu(r,e){for(var t=r.nodes_start,n=r.nodes_end;t!==null;){var i=t===n?null:sr(t);e.append(t),t=i}}let Tt=!1;function Di(r){Tt=r}let mt=!1;function Li(r){mt=r}let N=null,Le=!1;function Pe(r){N=r}let F=null;function rt(r){F=r}let oe=null;function mu(r){N!==null&&(oe===null?oe=[r]:oe.push(r))}let ie=null,he=0,pe=null;function yu(r){pe=r}let Jo=1,tr=0,gt=tr;function Ni(r){gt=r}let Qe=!1;function Qo(){return++Jo}function Ot(r){var c;var e=r.f;if(e&ae)return!0;if(e&Ie){var t=r.deps,n=(e&ve)!==0;if(e&ee&&(r.f&=~Dr),t!==null){var i,o,s=(e&kr)!==0,a=n&&F!==null&&!Qe,u=t.length;if((s||a)&&(F===null||!(F.f&ze))){var h=r,l=h.parent;for(i=0;i<u;i++)o=t[i],(s||!((c=o==null?void 0:o.reactions)!=null&&c.includes(h)))&&(o.reactions??(o.reactions=[])).push(h);s&&(h.f^=kr),a&&l!==null&&!(l.f&ve)&&(h.f^=ve)}for(i=0;i<u;i++)if(o=t[i],Ot(o)&&$o(o),o.wv>r.wv)return!0}(!n||F!==null&&!Qe)&&Z(r,X)}return!1}function es(r,e,t=!0){var n=r.reactions;if(n!==null&&!(oe!=null&&oe.includes(r)))for(var i=0;i<n.length;i++){var o=n[i];o.f&ee?es(o,e,!1):e===o&&(t?Z(o,ae):o.f&X&&Z(o,Ie),pt(o))}}function ts(r){var p;var e=ie,t=he,n=pe,i=N,o=Qe,s=oe,a=W,u=Le,h=gt,l=r.f;ie=null,he=0,pe=null,Qe=(l&ve)!==0&&(Le||!Tt||N===null),N=l&(Ve|It)?null:r,oe=null,Lr(r.ctx),Le=!1,gt=++tr,r.ac!==null&&(qr(()=>{r.ac.abort(_t)}),r.ac=null);try{r.f|=_n;var c=r.fn,d=c(),f=r.deps;if(ie!==null){var g;if(Or(r,he),f!==null&&he>0)for(f.length=he+ie.length,g=0;g<ie.length;g++)f[he+g]=ie[g];else r.deps=f=ie;if(!Qe||l&ee&&r.reactions!==null)for(g=he;g<f.length;g++)((p=f[g]).reactions??(p.reactions=[])).push(r)}else f!==null&&he<f.length&&(Or(r,he),f.length=he);if(or()&&pe!==null&&!Le&&f!==null&&!(r.f&(ee|Ie|ae)))for(g=0;g<pe.length;g++)es(pe[g],r);return i!==null&&i!==r&&(tr++,pe!==null&&(n===null?n=pe:n.push(...pe))),r.f&dt&&(r.f^=dt),d}catch(v){return Ya(v)}finally{r.f^=_n,ie=e,he=t,pe=n,N=i,Qe=o,oe=s,Lr(a),Le=u,gt=h}}function wu(r,e){let t=e.reactions;if(t!==null){var n=Da.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&e.f&ee&&(ie===null||!ie.includes(e))&&(Z(e,Ie),e.f&(ve|kr)||(e.f^=kr),Oo(e),Or(e,0))}function Or(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)wu(r,t[n])}function Nt(r){var e=r.f;if(!(e&ze)){Z(r,X);var t=F,n=Tt;F=r,Tt=!0;try{e&je?gu(r):Ko(r),Vo(r);var i=ts(r);r.teardown=typeof i=="function"?i:null,r.wv=Jo;var o;wo&&ba&&r.f&ae&&r.deps}finally{Tt=n,F=t}}}async function bu(){await Promise.resolve(),qa()}function U(r){var e=r.f,t=(e&ee)!==0;if(N!==null&&!Le){var n=F!==null&&(F.f&ze)!==0;if(!n&&!(oe!=null&&oe.includes(r))){var i=N.deps;if(N.f&_n)r.rv<tr&&(r.rv=tr,ie===null&&i!==null&&i[he]===r?he++:ie===null?ie=[r]:(!Qe||!ie.includes(r))&&ie.push(r));else{(N.deps??(N.deps=[])).push(r);var o=r.reactions;o===null?r.reactions=[N]:o.includes(N)||o.push(N)}}}else if(t&&r.deps===null&&r.effects===null){var s=r,a=s.parent;a!==null&&!(a.f&ve)&&(s.f^=ve)}if(mt){if(tt.has(r))return tt.get(r);if(t){s=r;var u=s.v;return(!(s.f&X)&&s.reactions!==null||rs(s))&&(u=Xn(s)),tt.set(s,u),u}}else if(t){if(s=r,Y!=null&&Y.has(s))return Y.get(s);Ot(s)&&$o(s)}if(Y!=null&&Y.has(r))return Y.get(r);if(r.f&dt)throw r.v;return r.v}function rs(r){if(r.v===J)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(tt.has(e)||e.f&ee&&rs(e))return!0;return!1}function Se(r){var e=Le;try{return Le=!0,r()}finally{Le=e}}const Eu=-7169;function Z(r,e){r.f=r.f&Eu|e}function _u(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(ft in r)Rn(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&ft in t&&Rn(t)}}}function Rn(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Rn(r[n],e)}catch{}const t=Ao(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=La(t);for(let i in n){const o=n[i].get;if(o)try{o.call(r)}catch{}}}}}function Au(r,e,t,n={}){function i(o){if(n.capture||Tu.call(e,o),!o.cancelBubble)return qr(()=>t==null?void 0:t.call(this,o))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Kn(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function xu(r,e,t,n,i){var o={capture:n,passive:i},s=Au(r,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Zn(()=>{e.removeEventListener(r,s,o)})}let Fi=null;function Tu(r){var v;var e=this,t=e.ownerDocument,n=r.type,i=((v=r.composedPath)==null?void 0:v.call(r))||[],o=i[0]||r.target;Fi=r;var s=0,a=Fi===r&&r.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(e===document||e===window)){r.__root=e;return}var h=i.indexOf(e);if(h===-1)return;u<=h&&(s=u)}if(o=i[s]||r.target,o!==e){_o(r,"currentTarget",{configurable:!0,get(){return o||t}});var l=N,c=F;Pe(null),rt(null);try{for(var d,f=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+n];p!=null&&(!o.disabled||r.target===o)&&p.call(o,r)}catch(w){d?f.push(w):d=w}if(r.cancelBubble||g===e||g===null)break;o=g}if(d){for(let w of f)queueMicrotask(()=>{throw w});throw d}}finally{r.__root=e,delete r.currentTarget,Pe(l),rt(c)}}}function Su(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function Gi(r,e){var t=F;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function $t(r,e){var t=(e&Ra)!==0,n=(e&ka)!==0,i,o=!r.startsWith("<!>");return()=>{i===void 0&&(i=Su(o?r:"<!>"+r),t||(i=Mr(i)));var s=n||ru?document.importNode(i,!0):i.cloneNode(!0);if(t){var a=Mr(s),u=s.lastChild;Gi(a,u)}else Gi(s,s);return s}}function Et(r,e){r!==null&&r.before(e)}function Pi(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}var xe,ke,le,nr,ir,jr;class Cu{constructor(e,t=!0){Oe(this,"anchor");ne(this,xe,new Map);ne(this,ke,new Map);ne(this,le,new Map);ne(this,nr,!0);ne(this,ir,()=>{var e=$;if(C(this,xe).has(e)){var t=C(this,xe).get(e),n=C(this,ke).get(t);if(n)Qn(n);else{var i=C(this,le).get(t);i&&(C(this,ke).set(t,i.effect),C(this,le).delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[o,s]of C(this,xe)){if(C(this,xe).delete(o),o===e)break;const a=C(this,le).get(s);a&&(Fe(a.effect),C(this,le).delete(s))}for(const[o,s]of C(this,ke)){if(o===t)continue;const a=()=>{if(Array.from(C(this,xe).values()).includes(o)){var h=document.createDocumentFragment();vu(s,h),h.append(Pr()),C(this,le).set(o,{effect:s,fragment:h})}else Fe(s);C(this,ke).delete(o)};C(this,nr)||!n?qo(s,a,!1):a()}}});ne(this,jr,e=>{C(this,xe).delete(e);const t=Array.from(C(this,xe).values());for(const[n,i]of C(this,le))t.includes(n)||(Fe(i.effect),C(this,le).delete(n))});this.anchor=e,$e(this,nr,t)}ensure(e,t){var n=$,i=zo();if(t&&!C(this,ke).has(e)&&!C(this,le).has(e))if(i){var o=document.createDocumentFragment(),s=Pr();o.append(s),C(this,le).set(e,{effect:Ir(()=>t(s)),fragment:o})}else C(this,ke).set(e,Ir(()=>t(this.anchor)));if(C(this,xe).set(n,e),i){for(const[a,u]of C(this,ke))a===e?n.skipped_effects.delete(u):n.skipped_effects.add(u);for(const[a,u]of C(this,le))a===e?n.skipped_effects.delete(u.effect):n.skipped_effects.add(u.effect);n.oncommit(C(this,ir)),n.ondiscard(C(this,jr))}else C(this,ir).call(this)}}xe=new WeakMap,ke=new WeakMap,le=new WeakMap,nr=new WeakMap,ir=new WeakMap,jr=new WeakMap;function ei(r){W===null&&So(),Mt&&W.l!==null?ku(W).m.push(r):Cn(()=>{const e=Se(r);if(typeof e=="function")return e})}function Ru(r){W===null&&So(),ei(()=>()=>Se(r))}function ku(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}function Mi(r,e,t=!1){var n=new Cu(r),i=t?Qt:0;function o(s,a){n.ensure(s,a)}jo(()=>{var s=!1;e((a,u=!0)=>{s=!0,o(u,a)}),s||o(!1,null)},i)}function Du(r,e){return e}function Lu(r,e,t){for(var n=r.items,i=[],o=e.length,s=0;s<o;s++)Jn(e[s].e,i,!0);var a=o>0&&i.length===0&&t!==null;if(a){var u=t.parentNode;su(u),u.append(t),n.clear(),Re(r,e[0].prev,e[o-1].next)}Xo(i,()=>{for(var h=0;h<o;h++){var l=e[h];a||(n.delete(l.k),Re(r,l.prev,l.next)),Fe(l.e,!a)}})}function Nu(r,e,t,n,i,o=null){var s=r,a={flags:e,items:new Map,first:null};{var u=r;s=u.appendChild(Pr())}var h=null,l=!1,c=new Map,d=qn(()=>{var v=t();return bo(v)?v:v==null?[]:Eo(v)}),f,g;function p(){Fu(g,f,a,c,s,i,e,n,t),o!==null&&(f.length===0?h?Qn(h):h=Ir(()=>o(s)):h!==null&&qo(h,()=>{h=null}))}jo(()=>{g??(g=F),f=U(d);var v=f.length;if(!(l&&v===0)){l=v===0;var w,m,y,E;if(zo()){var k=new Set,L=$;for(m=0;m<v;m+=1){y=f[m],E=n(y,m);var T=a.items.get(E)??c.get(E);T?ns(T,y,m):(w=is(null,a,null,null,y,E,m,i,e,t,!0),c.set(E,w)),k.add(E)}for(const[G,D]of a.items)k.has(G)||L.skipped_effects.add(D.e);L.oncommit(p)}else p();U(d)}})}function Fu(r,e,t,n,i,o,s,a,u){var h=e.length,l=t.items,c=t.first,d=c,f,g=null,p=[],v=[],w,m,y,E;for(E=0;E<h;E+=1){if(w=e[E],m=a(w,E),y=l.get(m),y===void 0){var k=n.get(m);if(k!==void 0){n.delete(m),l.set(m,k);var L=g?g.next:d;Re(t,g,k),Re(t,k,L),an(k,L,i),g=k}else{var T=d?d.e.nodes_start:i;g=is(T,t,g,g===null?t.first:g.next,w,m,E,o,s,u)}l.set(m,g),p=[],v=[],d=g.next;continue}if(ns(y,w,E),y.e.f&fe&&Qn(y.e),y!==d){if(f!==void 0&&f.has(y)){if(p.length<v.length){var G=v[0],D;g=G.prev;var z=p[0],H=p[p.length-1];for(D=0;D<p.length;D+=1)an(p[D],G,i);for(D=0;D<v.length;D+=1)f.delete(v[D]);Re(t,z.prev,H.next),Re(t,g,z),Re(t,H,G),d=G,g=H,E-=1,p=[],v=[]}else f.delete(y),an(y,d,i),Re(t,y.prev,y.next),Re(t,y,g===null?t.first:g.next),Re(t,g,y),g=y;continue}for(p=[],v=[];d!==null&&d.k!==m;)d.e.f&fe||(f??(f=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;y=d}p.push(y),g=y,d=y.next}if(d!==null||f!==void 0){for(var M=f===void 0?[]:Eo(f);d!==null;)d.e.f&fe||M.push(d),d=d.next;var ue=M.length;if(ue>0){var P=h===0?i:null;Lu(t,M,P)}}r.first=t.first&&t.first.e,r.last=g&&g.e;for(var V of n.values())Fe(V.e);n.clear()}function ns(r,e,t,n){Gr(r.v,e),r.i=t}function is(r,e,t,n,i,o,s,a,u,h,l){var c=(u&_a)!==0,d=(u&xa)===0,f=c?d?xt(i,!1,!1):er(i):i,g=u&Aa?er(s):s,p={i:g,v:f,k:o,a:null,e:null,prev:t,next:n};try{if(r===null){var v=document.createDocumentFragment();v.append(r=Pr())}return p.e=Ir(()=>a(r,f,g,h),Va),p.e.prev=t&&t.e,p.e.next=n&&n.e,t===null?l||(e.first=p):(t.next=p,t.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function an(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,o=r.e.nodes_start;o!==null&&o!==n;){var s=sr(o);i.before(o),o=s}}function Re(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Gu(r,e,t=e){var n=new WeakSet;uu(r,"input",async i=>{var o=i?r.defaultValue:r.value;if(o=un(r)?hn(o):o,t(o),$!==null&&n.add($),await bu(),o!==(o=e())){var s=r.selectionStart,a=r.selectionEnd,u=r.value.length;if(r.value=o??"",a!==null){var h=r.value.length;s===a&&a===u&&h>u?(r.selectionStart=h,r.selectionEnd=h):(r.selectionStart=s,r.selectionEnd=Math.min(a,h))}}}),Se(e)==null&&r.value&&(t(un(r)?hn(r.value):r.value),$!==null&&n.add($)),Xr(()=>{var i=e();if(r===document.activeElement){var o=Tr??$;if(n.has(o))return}un(r)&&i===hn(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function un(r){var e=r.type;return e==="number"||e==="range"}function hn(r){return r===""?null:+r}function Ii(r,e){return r===e||(r==null?void 0:r[ft])===e}function Pu(r={},e,t,n){return cu(()=>{var i,o;return Xr(()=>{i=o,o=[],Se(()=>{r!==t(...o)&&(e(r,...o),i&&Ii(t(...i),r)&&e(null,...i))})}),()=>{Kn(()=>{o&&Ii(t(...o),r)&&e(null,...o)})}}),r}function os(r=!1){const e=W,t=e.l.u;if(!t)return;let n=()=>_u(e.s);if(r){let i=0,o={};const s=Yn(()=>{let a=!1;const u=e.s;for(const h in u)u[h]!==o[h]&&(o[h]=u[h],a=!0);return a&&i++,i});n=()=>U(s)}t.b.length&&lu(()=>{Oi(e,n),Rr(t.b)}),Cn(()=>{const i=Se(()=>t.m.map(Ga));return()=>{for(const o of i)typeof o=="function"&&o()}}),t.a.length&&Cn(()=>{Oi(e,n),Rr(t.a)})}function Oi(r,e){if(r.l.s)for(const t of r.l.s)U(t);e()}function ti(r,e,t){if(r==null)return e(void 0),t&&t(void 0),et;const n=Se(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const wt=[];function Mu(r,e){return{subscribe:ar(r,e).subscribe}}function ar(r,e=et){let t=null;const n=new Set;function i(a){if(Ro(r,a)&&(r=a,t)){const u=!wt.length;for(const h of n)h[1](),wt.push(h,r);if(u){for(let h=0;h<wt.length;h+=2)wt[h][0](wt[h+1]);wt.length=0}}}function o(a){i(a(r))}function s(a,u=et){const h=[a,u];return n.add(h),n.size===1&&(t=e(i,o)||et),a(r),()=>{n.delete(h),n.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function ss(r,e,t){const n=!Array.isArray(r),i=n?[r]:r;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Mu(t,(s,a)=>{let u=!1;const h=[];let l=0,c=et;const d=()=>{if(l)return;c();const g=e(n?h[0]:h,s,a);o?s(g):c=typeof g=="function"?g:et},f=i.map((g,p)=>ti(g,v=>{h[p]=v,l&=~(1<<p),u&&d()},()=>{l|=1<<p}));return u=!0,d(),function(){Rr(f),c(),u=!1}})}function Iu(r){let e;return ti(r,t=>e=t)(),e}let mr=!1,kn=Symbol();function ln(r,e,t){const n=t[e]??(t[e]={store:null,source:xt(void 0),unsubscribe:et});if(n.store!==r&&!(kn in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=et;else{var i=!0;n.unsubscribe=ti(r,o=>{i?n.source.v=o:ce(n.source,o)}),i=!1}return r&&kn in t?Iu(r):U(n.source)}function Ou(r,e){return r.set(e),e}function $u(){const r={};function e(){Zn(()=>{for(var t in r)r[t].unsubscribe();_o(r,kn,{enumerable:!1,value:!0})})}return[r,e]}function Uu(r){var e=mr;try{return mr=!1,[r(),mr]}finally{mr=e}}function Bu(r,e,t,n){var m;var i=!Mt||(t&Ta)!==0,o=(t&Ca)!==0,s=n,a=!0,u=()=>(a&&(a=!1,s=n),s),h;{var l=ft in r||Ma in r;h=((m=xr(r,e))==null?void 0:m.set)??(l&&e in r?y=>r[e]=y:void 0)}var c,d=!1;[c,d]=Uu(()=>r[e]),c===void 0&&n!==void 0&&(c=u(),h&&(i&&za(),h(c)));var f;if(i?f=()=>{var y=r[e];return y===void 0?u():(a=!0,y)}:f=()=>{var y=r[e];return y!==void 0&&(s=void 0),y===void 0?s:y},i&&!(t&Sa))return f;if(h){var g=r.$$legacy;return function(y,E){return arguments.length>0?((!i||!E||g||d)&&h(E?f():y),y):f()}}var p=!1,v=qn(()=>(p=!1,f()));U(v);var w=F;return function(y,E){if(arguments.length>0){const k=E?U(v):i&&o?At(y):y;return ce(v,k),p=!0,s!==void 0&&(s=k),y}return mt&&p||w.f&ze?v.v:U(v)}}function We(r){return Array.isArray?Array.isArray(r):hs(r)==="[object Array]"}function zu(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Hu(r){return r==null?"":zu(r)}function Ne(r){return typeof r=="string"}function as(r){return typeof r=="number"}function Wu(r){return r===!0||r===!1||ju(r)&&hs(r)=="[object Boolean]"}function us(r){return typeof r=="object"}function ju(r){return us(r)&&r!==null}function de(r){return r!=null}function cn(r){return!r.trim().length}function hs(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const Vu="Incorrect 'index' type",Ku=r=>`Invalid value for key ${r}`,Yu=r=>`Pattern length exceeds max of ${r}.`,qu=r=>`Missing ${r} property in key`,Xu=r=>`Property 'weight' in key '${r}' must be a positive integer`,$i=Object.prototype.hasOwnProperty;class Zu{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let i=ls(n);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ls(r){let e=null,t=null,n=null,i=1,o=null;if(Ne(r)||We(r))n=r,e=Ui(r),t=Dn(r);else{if(!$i.call(r,"name"))throw new Error(qu("name"));const s=r.name;if(n=s,$i.call(r,"weight")&&(i=r.weight,i<=0))throw new Error(Xu(s));e=Ui(s),t=Dn(s),o=r.getFn}return{path:e,id:t,weight:i,src:n,getFn:o}}function Ui(r){return We(r)?r:r.split(".")}function Dn(r){return We(r)?r.join("."):r}function Ju(r,e){let t=[],n=!1;const i=(o,s,a)=>{if(de(o))if(!s[a])t.push(o);else{let u=s[a];const h=o[u];if(!de(h))return;if(a===s.length-1&&(Ne(h)||as(h)||Wu(h)))t.push(Hu(h));else if(We(h)){n=!0;for(let l=0,c=h.length;l<c;l+=1)i(h[l],s,a+1)}else s.length&&i(h,s,a+1)}};return i(r,Ne(e)?e.split("."):e,0),n?t:t[0]}const Qu={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},eh={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},th={location:0,threshold:.6,distance:100},rh={useExtendedSearch:!1,getFn:Ju,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var R={...eh,...Qu,...th,...rh};const nh=/[^ ]+/g;function ih(r=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(i){const o=i.match(nh).length;if(t.has(o))return t.get(o);const s=1/Math.pow(o,.5*r),a=parseFloat(Math.round(s*n)/n);return t.set(o,a),a},clear(){t.clear()}}}class ri{constructor({getFn:e=R.getFn,fieldNormWeight:t=R.fieldNormWeight}={}){this.norm=ih(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ne(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Ne(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!de(e)||cn(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(e):this.getFn(e,i.path);if(de(s)){if(We(s)){let a=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:h,value:l}=u.pop();if(de(l))if(Ne(l)&&!cn(l)){let c={v:l,i:h,n:this.norm.get(l)};a.push(c)}else We(l)&&l.forEach((c,d)=>{u.push({nestedArrIndex:d,value:c})})}n.$[o]=a}else if(Ne(s)&&!cn(s)){let a={v:s,n:this.norm.get(s)};n.$[o]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function cs(r,e,{getFn:t=R.getFn,fieldNormWeight:n=R.fieldNormWeight}={}){const i=new ri({getFn:t,fieldNormWeight:n});return i.setKeys(r.map(ls)),i.setSources(e),i.create(),i}function oh(r,{getFn:e=R.getFn,fieldNormWeight:t=R.fieldNormWeight}={}){const{keys:n,records:i}=r,o=new ri({getFn:e,fieldNormWeight:t});return o.setKeys(n),o.setIndexRecords(i),o}function yr(r,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:i=R.distance,ignoreLocation:o=R.ignoreLocation}={}){const s=e/r.length;if(o)return s;const a=Math.abs(n-t);return i?s+a/i:a?1:s}function sh(r=[],e=R.minMatchCharLength){let t=[],n=-1,i=-1,o=0;for(let s=r.length;o<s;o+=1){let a=r[o];a&&n===-1?n=o:!a&&n!==-1&&(i=o-1,i-n+1>=e&&t.push([n,i]),n=-1)}return r[o-1]&&o-n>=e&&t.push([n,o-1]),t}const ut=32;function ah(r,e,t,{location:n=R.location,distance:i=R.distance,threshold:o=R.threshold,findAllMatches:s=R.findAllMatches,minMatchCharLength:a=R.minMatchCharLength,includeMatches:u=R.includeMatches,ignoreLocation:h=R.ignoreLocation}={}){if(e.length>ut)throw new Error(Yu(ut));const l=e.length,c=r.length,d=Math.max(0,Math.min(n,c));let f=o,g=d;const p=a>1||u,v=p?Array(c):[];let w;for(;(w=r.indexOf(e,g))>-1;){let T=yr(e,{currentLocation:w,expectedLocation:d,distance:i,ignoreLocation:h});if(f=Math.min(T,f),g=w+l,p){let G=0;for(;G<l;)v[w+G]=1,G+=1}}g=-1;let m=[],y=1,E=l+c;const k=1<<l-1;for(let T=0;T<l;T+=1){let G=0,D=E;for(;G<D;)yr(e,{errors:T,currentLocation:d+D,expectedLocation:d,distance:i,ignoreLocation:h})<=f?G=D:E=D,D=Math.floor((E-G)/2+G);E=D;let z=Math.max(1,d-D+1),H=s?c:Math.min(d+D,c)+l,M=Array(H+2);M[H+1]=(1<<T)-1;for(let P=H;P>=z;P-=1){let V=P-1,se=t[r.charAt(V)];if(p&&(v[V]=+!!se),M[P]=(M[P+1]<<1|1)&se,T&&(M[P]|=(m[P+1]|m[P])<<1|1|m[P+1]),M[P]&k&&(y=yr(e,{errors:T,currentLocation:V,expectedLocation:d,distance:i,ignoreLocation:h}),y<=f)){if(f=y,g=V,g<=d)break;z=Math.max(1,2*d-g)}}if(yr(e,{errors:T+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:h})>f)break;m=M}const L={isMatch:g>=0,score:Math.max(.001,y)};if(p){const T=sh(v,a);T.length?u&&(L.indices=T):L.isMatch=!1}return L}function uh(r){let e={};for(let t=0,n=r.length;t<n;t+=1){const i=r.charAt(t);e[i]=(e[i]||0)|1<<n-t-1}return e}const $r=String.prototype.normalize?r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):r=>r;class ds{constructor(e,{location:t=R.location,threshold:n=R.threshold,distance:i=R.distance,includeMatches:o=R.includeMatches,findAllMatches:s=R.findAllMatches,minMatchCharLength:a=R.minMatchCharLength,isCaseSensitive:u=R.isCaseSensitive,ignoreDiacritics:h=R.ignoreDiacritics,ignoreLocation:l=R.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:h,ignoreLocation:l},e=u?e:e.toLowerCase(),e=h?$r(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const c=(f,g)=>{this.chunks.push({pattern:f,alphabet:uh(f),startIndex:g})},d=this.pattern.length;if(d>ut){let f=0;const g=d%ut,p=d-g;for(;f<p;)c(this.pattern.substr(f,ut),f),f+=ut;if(g){const v=d-ut;c(this.pattern.substr(v),v)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:i}=this.options;if(e=t?e:e.toLowerCase(),e=n?$r(e):e,this.pattern===e){let p={isMatch:!0,score:0};return i&&(p.indices=[[0,e.length-1]]),p}const{location:o,distance:s,threshold:a,findAllMatches:u,minMatchCharLength:h,ignoreLocation:l}=this.options;let c=[],d=0,f=!1;this.chunks.forEach(({pattern:p,alphabet:v,startIndex:w})=>{const{isMatch:m,score:y,indices:E}=ah(e,p,v,{location:o+w,distance:s,threshold:a,findAllMatches:u,minMatchCharLength:h,includeMatches:i,ignoreLocation:l});m&&(f=!0),d+=y,m&&E&&(c=[...c,...E])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&i&&(g.indices=c),g}}class nt{constructor(e){this.pattern=e}static isMultiMatch(e){return Bi(e,this.multiRegex)}static isSingleMatch(e){return Bi(e,this.singleRegex)}search(){}}function Bi(r,e){const t=r.match(e);return t?t[1]:null}class hh extends nt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class lh extends nt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ch extends nt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class dh extends nt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class fh extends nt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class gh extends nt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class fs extends nt{constructor(e,{location:t=R.location,threshold:n=R.threshold,distance:i=R.distance,includeMatches:o=R.includeMatches,findAllMatches:s=R.findAllMatches,minMatchCharLength:a=R.minMatchCharLength,isCaseSensitive:u=R.isCaseSensitive,ignoreDiacritics:h=R.ignoreDiacritics,ignoreLocation:l=R.ignoreLocation}={}){super(e),this._bitapSearch=new ds(e,{location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:h,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class gs extends nt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const i=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+o,i.push([n,t-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const Ln=[hh,gs,ch,dh,gh,fh,lh,fs],zi=Ln.length,ph=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vh="|";function mh(r,e={}){return r.split(vh).map(t=>{let n=t.trim().split(ph).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=n.length;o<s;o+=1){const a=n[o];let u=!1,h=-1;for(;!u&&++h<zi;){const l=Ln[h];let c=l.isMultiMatch(a);c&&(i.push(new l(c,e)),u=!0)}if(!u)for(h=-1;++h<zi;){const l=Ln[h];let c=l.isSingleMatch(a);if(c){i.push(new l(c,e));break}}}return i})}const yh=new Set([fs.type,gs.type]);class wh{constructor(e,{isCaseSensitive:t=R.isCaseSensitive,ignoreDiacritics:n=R.ignoreDiacritics,includeMatches:i=R.includeMatches,minMatchCharLength:o=R.minMatchCharLength,ignoreLocation:s=R.ignoreLocation,findAllMatches:a=R.findAllMatches,location:u=R.location,threshold:h=R.threshold,distance:l=R.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:o,findAllMatches:a,ignoreLocation:s,location:u,threshold:h,distance:l},e=t?e:e.toLowerCase(),e=n?$r(e):e,this.pattern=e,this.query=mh(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?$r(e):e;let s=0,a=[],u=0;for(let h=0,l=t.length;h<l;h+=1){const c=t[h];a.length=0,s=0;for(let d=0,f=c.length;d<f;d+=1){const g=c[d],{isMatch:p,indices:v,score:w}=g.search(e);if(p){if(s+=1,u+=w,n){const m=g.constructor.type;yh.has(m)?a=[...a,...v]:a.push(v)}}else{u=0,s=0,a.length=0;break}}if(s){let d={isMatch:!0,score:u/s};return n&&(d.indices=a),d}}return{isMatch:!1,score:1}}}const Nn=[];function bh(...r){Nn.push(...r)}function Fn(r,e){for(let t=0,n=Nn.length;t<n;t+=1){let i=Nn[t];if(i.condition(r,e))return new i(r,e)}return new ds(r,e)}const Ur={AND:"$and",OR:"$or"},Gn={PATH:"$path",PATTERN:"$val"},Pn=r=>!!(r[Ur.AND]||r[Ur.OR]),Eh=r=>!!r[Gn.PATH],_h=r=>!We(r)&&us(r)&&!Pn(r),Hi=r=>({[Ur.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function ps(r,e,{auto:t=!0}={}){const n=i=>{let o=Object.keys(i);const s=Eh(i);if(!s&&o.length>1&&!Pn(i))return n(Hi(i));if(_h(i)){const u=s?i[Gn.PATH]:o[0],h=s?i[Gn.PATTERN]:i[u];if(!Ne(h))throw new Error(Ku(u));const l={keyId:Dn(u),pattern:h};return t&&(l.searcher=Fn(h,e)),l}let a={children:[],operator:o[0]};return o.forEach(u=>{const h=i[u];We(h)&&h.forEach(l=>{a.children.push(n(l))})}),a};return Pn(r)||(r=Hi(r)),n(r)}function Ah(r,{ignoreFieldNorm:e=R.ignoreFieldNorm}){r.forEach(t=>{let n=1;t.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;n*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:o))}),t.score=n})}function xh(r,e){const t=r.matches;e.matches=[],de(t)&&t.forEach(n=>{if(!de(n.indices)||!n.indices.length)return;const{indices:i,value:o}=n;let s={indices:i,value:o};n.key&&(s.key=n.key.src),n.idx>-1&&(s.refIndex=n.idx),e.matches.push(s)})}function Th(r,e){e.score=r.score}function Sh(r,e,{includeMatches:t=R.includeMatches,includeScore:n=R.includeScore}={}){const i=[];return t&&i.push(xh),n&&i.push(Th),r.map(o=>{const{idx:s}=o,a={item:e[s],refIndex:s};return i.length&&i.forEach(u=>{u(o,a)}),a})}class Ut{constructor(e,t={},n){this.options={...R,...t},this.options.useExtendedSearch,this._keyStore=new Zu(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ri))throw new Error(Vu);this._myIndex=t||cs(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){de(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let u=Ne(e)?Ne(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ah(u,{ignoreFieldNorm:a}),o&&u.sort(s),as(t)&&t>-1&&(u=u.slice(0,t)),Sh(u,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=Fn(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:o,i:s,n:a})=>{if(!de(o))return;const{isMatch:u,score:h,indices:l}=t.searchIn(o);u&&i.push({item:o,idx:s,matches:[{score:h,value:o,norm:a,indices:l}]})}),i}_searchLogical(e){const t=ps(e,this.options),n=(a,u,h)=>{if(!a.children){const{keyId:c,searcher:d}=a,f=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(u,c),searcher:d});return f&&f.length?[{idx:h,item:u,matches:f}]:[]}const l=[];for(let c=0,d=a.children.length;c<d;c+=1){const f=a.children[c],g=n(f,u,h);if(g.length)l.push(...g);else if(a.operator===Ur.AND)return[]}return l},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:u})=>{if(de(a)){let h=n(t,a,u);h.length&&(o[u]||(o[u]={idx:u,item:a,matches:[]},s.push(o[u])),h.forEach(({matches:l})=>{o[u].matches.push(...l)}))}}),s}_searchObjectList(e){const t=Fn(e,this.options),{keys:n,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!de(s))return;let u=[];n.forEach((h,l)=>{u.push(...this._findMatches({key:h,value:s[l],searcher:t}))}),u.length&&o.push({idx:a,item:s,matches:u})}),o}_findMatches({key:e,value:t,searcher:n}){if(!de(t))return[];let i=[];if(We(t))t.forEach(({v:o,i:s,n:a})=>{if(!de(o))return;const{isMatch:u,score:h,indices:l}=n.searchIn(o);u&&i.push({score:h,key:e,value:o,idx:s,norm:a,indices:l})});else{const{v:o,n:s}=t,{isMatch:a,score:u,indices:h}=n.searchIn(o);a&&i.push({score:u,key:e,value:o,norm:s,indices:h})}return i}}Ut.version="7.1.0";Ut.createIndex=cs;Ut.parseIndex=oh;Ut.config=R;Ut.parseQuery=ps;bh(wh);function Ch(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ni={exports:{}},St=typeof Reflect=="object"?Reflect:null,Wi=St&&typeof St.apply=="function"?St.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Sr;St&&typeof St.ownKeys=="function"?Sr=St.ownKeys:Object.getOwnPropertySymbols?Sr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Sr=function(e){return Object.getOwnPropertyNames(e)};function Rh(r){console&&console.warn&&console.warn(r)}var vs=Number.isNaN||function(e){return e!==e};function B(){B.init.call(this)}ni.exports=B;ni.exports.once=Nh;B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var ji=10;function Zr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return ji},set:function(r){if(typeof r!="number"||r<0||vs(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");ji=r}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vs(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ms(r){return r._maxListeners===void 0?B.defaultMaxListeners:r._maxListeners}B.prototype.getMaxListeners=function(){return ms(this)};B.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Wi(u,this,t);else for(var h=u.length,l=_s(u,h),n=0;n<h;++n)Wi(l[n],this,t);return!0};function ys(r,e,t,n){var i,o,s;if(Zr(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=ms(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,Rh(a)}return r}B.prototype.addListener=function(e,t){return ys(this,e,t,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(e,t){return ys(this,e,t,!0)};function kh(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ws(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=kh.bind(n);return i.listener=t,n.wrapFn=i,i}B.prototype.once=function(e,t){return Zr(t),this.on(e,ws(this,e,t)),this};B.prototype.prependOnceListener=function(e,t){return Zr(t),this.prependListener(e,ws(this,e,t)),this};B.prototype.removeListener=function(e,t){var n,i,o,s,a;if(Zr(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():Dh(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function bs(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Lh(i):_s(i,i.length)}B.prototype.listeners=function(e){return bs(this,e,!0)};B.prototype.rawListeners=function(e){return bs(this,e,!1)};B.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Es.call(r,e)};B.prototype.listenerCount=Es;function Es(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}B.prototype.eventNames=function(){return this._eventsCount>0?Sr(this._events):[]};function _s(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function Dh(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Lh(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Nh(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}As(r,e,o,{once:!0}),e!=="error"&&Fh(r,i,{once:!0})})}function Fh(r,e,t){typeof r.on=="function"&&As(r,"error",e,t)}function As(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var xs=ni.exports;function Gh(){const r=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const n in arguments[e])r[n]=arguments[e][n];return r}let K=Gh;typeof Object.assign=="function"&&(K=Object.assign);function me(r,e,t,n){const i=r._nodes.get(e);let o=null;return i&&(n==="mixed"?o=i.out&&i.out[t]||i.undirected&&i.undirected[t]:n==="directed"?o=i.out&&i.out[t]:o=i.undirected&&i.undirected[t]),o}function q(r){return typeof r=="object"&&r!==null}function Ts(r){let e;for(e in r)return!1;return!0}function ge(r,e,t){Object.defineProperty(r,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Ee(r,e,t){const n={enumerable:!0,configurable:!0};typeof t=="function"?n.get=t:(n.value=t,n.writable=!1),Object.defineProperty(r,e,n)}function Vi(r){return!(!q(r)||r.attributes&&!Array.isArray(r.attributes))}function Ph(){let r=Math.floor(Math.random()*256)&255;return()=>r++}function He(){const r=arguments;let e=null,t=-1;return{[Symbol.iterator](){return this},next(){let n=null;do{if(e===null){if(t++,t>=r.length)return{done:!0};e=r[t][Symbol.iterator]()}if(n=e.next(),n.done){e=null;continue}break}while(!0);return n}}}function Bt(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class ii extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class A extends ii{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,A.prototype.constructor)}}class _ extends ii{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_.prototype.constructor)}}class S extends ii{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,S.prototype.constructor)}}function Ss(r,e){this.key=r,this.attributes=e,this.clear()}Ss.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Cs(r,e){this.key=r,this.attributes=e,this.clear()}Cs.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Rs(r,e){this.key=r,this.attributes=e,this.clear()}Rs.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function zt(r,e,t,n,i){this.key=e,this.attributes=i,this.undirected=r,this.source=t,this.target=n}zt.prototype.attach=function(){let r="out",e="in";this.undirected&&(r=e="undirected");const t=this.source.key,n=this.target.key;this.source[r][n]=this,!(this.undirected&&t===n)&&(this.target[e][t]=this)};zt.prototype.attachMulti=function(){let r="out",e="in";const t=this.source.key,n=this.target.key;this.undirected&&(r=e="undirected");const i=this.source[r],o=i[n];if(typeof o>"u"){i[n]=this,this.undirected&&t===n||(this.target[e][t]=this);return}o.previous=this,this.next=o,i[n]=this,this.target[e][t]=this};zt.prototype.detach=function(){const r=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),delete this.source[t][e],delete this.target[n][r]};zt.prototype.detachMulti=function(){const r=this.source.key,e=this.target.key;let t="out",n="in";this.undirected&&(t=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[n][r]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[n][r]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ks=0,Ds=1,Mh=2,Ls=3;function Ye(r,e,t,n,i,o,s){let a,u,h,l;if(n=""+n,t===ks){if(a=r._nodes.get(n),!a)throw new _(`Graph.${e}: could not find the "${n}" node in the graph.`);h=i,l=o}else if(t===Ls){if(i=""+i,u=r._edges.get(i),!u)throw new _(`Graph.${e}: could not find the "${i}" edge in the graph.`);const c=u.source.key,d=u.target.key;if(n===c)a=u.target;else if(n===d)a=u.source;else throw new _(`Graph.${e}: the "${n}" node is not attached to the "${i}" edge (${c}, ${d}).`);h=o,l=s}else{if(u=r._edges.get(n),!u)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`);t===Ds?a=u.source:a=u.target,h=i,l=o}return[a,h,l]}function Ih(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);return s.attributes[a]}}function Oh(r,e,t){r.prototype[e]=function(n,i){const[o]=Ye(this,e,t,n,i);return o.attributes}}function $h(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);return s.attributes.hasOwnProperty(a)}}function Uh(r,e,t){r.prototype[e]=function(n,i,o,s){const[a,u,h]=Ye(this,e,t,n,i,o,s);return a.attributes[u]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Bh(r,e,t){r.prototype[e]=function(n,i,o,s){const[a,u,h]=Ye(this,e,t,n,i,o,s);if(typeof h!="function")throw new A(`Graph.${e}: updater should be a function.`);const l=a.attributes,c=h(l[u]);return l[u]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function zh(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function Hh(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);if(!q(a))throw new A(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Wh(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);if(!q(a))throw new A(`Graph.${e}: provided attributes are not a plain object.`);return K(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function jh(r,e,t){r.prototype[e]=function(n,i,o){const[s,a]=Ye(this,e,t,n,i,o);if(typeof a!="function")throw new A(`Graph.${e}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Vh=[{name:r=>`get${r}Attribute`,attacher:Ih},{name:r=>`get${r}Attributes`,attacher:Oh},{name:r=>`has${r}Attribute`,attacher:$h},{name:r=>`set${r}Attribute`,attacher:Uh},{name:r=>`update${r}Attribute`,attacher:Bh},{name:r=>`remove${r}Attribute`,attacher:zh},{name:r=>`replace${r}Attributes`,attacher:Hh},{name:r=>`merge${r}Attributes`,attacher:Wh},{name:r=>`update${r}Attributes`,attacher:jh}];function Kh(r){Vh.forEach(function({name:e,attacher:t}){t(r,e("Node"),ks),t(r,e("Source"),Ds),t(r,e("Target"),Mh),t(r,e("Opposite"),Ls)})}function Yh(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return o.attributes[i]}}function qh(r,e,t){r.prototype[e]=function(n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+arguments[1];if(i=me(this,o,s,t),!i)throw new _(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,i=this._edges.get(n),!i)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return i.attributes}}function Xh(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function Zh(r,e,t){r.prototype[e]=function(n,i,o){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,u=""+i;if(i=arguments[2],o=arguments[3],s=me(this,a,u,t),!s)throw new _(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Jh(r,e,t){r.prototype[e]=function(n,i,o){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,u=""+i;if(i=arguments[2],o=arguments[3],s=me(this,a,u,t),!s)throw new _(`Graph.${e}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,s=this._edges.get(n),!s)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof o!="function")throw new A(`Graph.${e}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Qh(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function el(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!q(i))throw new A(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function tl(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(!q(i))throw new A(`Graph.${e}: provided attributes are not a plain object.`);return K(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function rl(r,e,t){r.prototype[e]=function(n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new S(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new S(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,a=""+i;if(i=arguments[2],o=me(this,s,a,t),!o)throw new _(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(t!=="mixed")throw new S(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new _(`Graph.${e}: could not find the "${n}" edge in the graph.`)}if(typeof i!="function")throw new A(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const nl=[{name:r=>`get${r}Attribute`,attacher:Yh},{name:r=>`get${r}Attributes`,attacher:qh},{name:r=>`has${r}Attribute`,attacher:Xh},{name:r=>`set${r}Attribute`,attacher:Zh},{name:r=>`update${r}Attribute`,attacher:Jh},{name:r=>`remove${r}Attribute`,attacher:Qh},{name:r=>`replace${r}Attributes`,attacher:el},{name:r=>`merge${r}Attributes`,attacher:tl},{name:r=>`update${r}Attributes`,attacher:rl}];function il(r){nl.forEach(function({name:e,attacher:t}){t(r,e("Edge"),"mixed"),t(r,e("DirectedEdge"),"directed"),t(r,e("UndirectedEdge"),"undirected")})}const ol=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function sl(r,e,t,n){let i=!1;for(const o in e){if(o===n)continue;const s=e[o];if(i=t(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),r&&i)return s.key}}function al(r,e,t,n){let i,o,s,a=!1;for(const u in e)if(u!==n){i=e[u];do{if(o=i.source,s=i.target,a=t(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),r&&a)return i.key;i=i.next}while(i!==void 0)}}function dn(r,e){const t=Object.keys(r),n=t.length;let i,o=0;return{[Symbol.iterator](){return this},next(){do if(i)i=i.next;else{if(o>=n)return{done:!0};const s=t[o++];if(s===e){i=void 0;continue}i=r[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}}}function ul(r,e,t,n){const i=e[t];if(!i)return;const o=i.source,s=i.target;if(n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&r)return i.key}function hl(r,e,t,n){let i=e[t];if(!i)return;let o=!1;do{if(o=n(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),r&&o)return i.key;i=i.next}while(i!==void 0)}function fn(r,e){let t=r[e];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const i={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:i}}};let n=!1;return{[Symbol.iterator](){return this},next(){return n===!0?{done:!0}:(n=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function ll(r,e){if(r.size===0)return[];if(e==="mixed"||e===r.type)return Array.from(r._edges.keys());const t=e==="undirected"?r.undirectedSize:r.directedSize,n=new Array(t),i=e==="undirected",o=r._edges.values();let s=0,a,u;for(;a=o.next(),a.done!==!0;)u=a.value,u.undirected===i&&(n[s++]=u.key);return n}function Ns(r,e,t,n){if(e.size===0)return;const i=t!=="mixed"&&t!==e.type,o=t==="undirected";let s,a,u=!1;const h=e._edges.values();for(;s=h.next(),s.done!==!0;){if(a=s.value,i&&a.undirected!==o)continue;const{key:l,attributes:c,source:d,target:f}=a;if(u=n(l,c,d.key,f.key,d.attributes,f.attributes,a.undirected),r&&u)return l}}function cl(r,e){if(r.size===0)return Bt();const t=e!=="mixed"&&e!==r.type,n=e==="undirected",i=r._edges.values();return{[Symbol.iterator](){return this},next(){let o,s;for(;;){if(o=i.next(),o.done)return o;if(s=o.value,!(t&&s.undirected!==n))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}}}}function oi(r,e,t,n,i,o){const s=e?al:sl;let a;if(t!=="undirected"&&(n!=="out"&&(a=s(r,i.in,o),r&&a)||n!=="in"&&(a=s(r,i.out,o,n?void 0:i.key),r&&a))||t!=="directed"&&(a=s(r,i.undirected,o),r&&a))return a}function dl(r,e,t,n){const i=[];return oi(!1,r,e,t,n,function(o){i.push(o)}),i}function fl(r,e,t){let n=Bt();return r!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(n=He(n,dn(t.in))),e!=="in"&&typeof t.out<"u"&&(n=He(n,dn(t.out,e?void 0:t.key)))),r!=="directed"&&typeof t.undirected<"u"&&(n=He(n,dn(t.undirected))),n}function si(r,e,t,n,i,o,s){const a=t?hl:ul;let u;if(e!=="undirected"&&(typeof i.in<"u"&&n!=="out"&&(u=a(r,i.in,o,s),r&&u)||typeof i.out<"u"&&n!=="in"&&(n||i.key!==o)&&(u=a(r,i.out,o,s),r&&u))||e!=="directed"&&typeof i.undirected<"u"&&(u=a(r,i.undirected,o,s),r&&u))return u}function gl(r,e,t,n,i){const o=[];return si(!1,r,e,t,n,i,function(s){o.push(s)}),o}function pl(r,e,t,n){let i=Bt();return r!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&n in t.in&&(i=He(i,fn(t.in,n))),typeof t.out<"u"&&e!=="in"&&n in t.out&&(e||t.key!==n)&&(i=He(i,fn(t.out,n)))),r!=="directed"&&typeof t.undirected<"u"&&n in t.undirected&&(i=He(i,fn(t.undirected,n))),i}function vl(r,e){const{name:t,type:n,direction:i}=e;r.prototype[t]=function(o,s){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return ll(this,n);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new _(`Graph.${t}: could not find the "${o}" node in the graph.`);return dl(this.multi,n==="mixed"?this.type:n,i,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new _(`Graph.${t}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new _(`Graph.${t}:  could not find the "${s}" target node in the graph.`);return gl(n,this.multi,i,a,s)}throw new A(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function ml(r,e){const{name:t,type:n,direction:i}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[o]=function(h,l,c){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return c=h,Ns(!1,this,n,c);if(arguments.length===2){h=""+h,c=l;const d=this._nodes.get(h);if(typeof d>"u")throw new _(`Graph.${o}: could not find the "${h}" node in the graph.`);return oi(!1,this.multi,n==="mixed"?this.type:n,i,d,c)}if(arguments.length===3){h=""+h,l=""+l;const d=this._nodes.get(h);if(!d)throw new _(`Graph.${o}:  could not find the "${h}" source node in the graph.`);if(!this._nodes.has(l))throw new _(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return si(!1,n,this.multi,i,d,l,c)}throw new A(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+t[0].toUpperCase()+t.slice(1);r.prototype[s]=function(){const h=Array.prototype.slice.call(arguments),l=h.pop();let c;if(h.length===0){let d=0;n!=="directed"&&(d+=this.undirectedSize),n!=="undirected"&&(d+=this.directedSize),c=new Array(d);let f=0;h.push((g,p,v,w,m,y,E)=>{c[f++]=l(g,p,v,w,m,y,E)})}else c=[],h.push((d,f,g,p,v,w,m)=>{c.push(l(d,f,g,p,v,w,m))});return this[o].apply(this,h),c};const a="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[a]=function(){const h=Array.prototype.slice.call(arguments),l=h.pop(),c=[];return h.push((d,f,g,p,v,w,m)=>{l(d,f,g,p,v,w,m)&&c.push(d)}),this[o].apply(this,h),c};const u="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(){let h=Array.prototype.slice.call(arguments);if(h.length<2||h.length>4)throw new A(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${h.length}).`);if(typeof h[h.length-1]=="function"&&typeof h[h.length-2]!="function")throw new A(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let l,c;h.length===2?(l=h[0],c=h[1],h=[]):h.length===3?(l=h[1],c=h[2],h=[h[0]]):h.length===4&&(l=h[2],c=h[3],h=[h[0],h[1]]);let d=c;return h.push((f,g,p,v,w,m,y)=>{d=l(d,f,g,p,v,w,m,y)}),this[o].apply(this,h),d}}function yl(r,e){const{name:t,type:n,direction:i}=e,o="find"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[o]=function(u,h,l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return l=u,Ns(!0,this,n,l);if(arguments.length===2){u=""+u,l=h;const c=this._nodes.get(u);if(typeof c>"u")throw new _(`Graph.${o}: could not find the "${u}" node in the graph.`);return oi(!0,this.multi,n==="mixed"?this.type:n,i,c,l)}if(arguments.length===3){u=""+u,h=""+h;const c=this._nodes.get(u);if(!c)throw new _(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new _(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return si(!0,n,this.multi,i,c,h,l)}throw new A(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();return u.push((c,d,f,g,p,v,w)=>h(c,d,f,g,p,v,w)),!!this[o].apply(this,u)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();return u.push((c,d,f,g,p,v,w)=>!h(c,d,f,g,p,v,w)),!this[o].apply(this,u)}}function wl(r,e){const{name:t,type:n,direction:i}=e,o=t.slice(0,-1)+"Entries";r.prototype[o]=function(s,a){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Bt();if(!arguments.length)return cl(this,n);if(arguments.length===1){s=""+s;const u=this._nodes.get(s);if(!u)throw new _(`Graph.${o}: could not find the "${s}" node in the graph.`);return fl(n,i,u)}if(arguments.length===2){s=""+s,a=""+a;const u=this._nodes.get(s);if(!u)throw new _(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new _(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return pl(n,i,u,a)}throw new A(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function bl(r){ol.forEach(e=>{vl(r,e),ml(r,e),yl(r,e),wl(r,e)})}const El=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Jr(){this.A=null,this.B=null}Jr.prototype.wrap=function(r){this.A===null?this.A=r:this.B===null&&(this.B=r)};Jr.prototype.has=function(r){return this.A!==null&&r in this.A||this.B!==null&&r in this.B};function jt(r,e,t,n,i){for(const o in n){const s=n[o],a=s.source,u=s.target,h=a===t?u:a;if(e&&e.has(h.key))continue;const l=i(h.key,h.attributes);if(r&&l)return h.key}}function ai(r,e,t,n,i){if(e!=="mixed"){if(e==="undirected")return jt(r,null,n,n.undirected,i);if(typeof t=="string")return jt(r,null,n,n[t],i)}const o=new Jr;let s;if(e!=="undirected"){if(t!=="out"){if(s=jt(r,null,n,n.in,i),r&&s)return s;o.wrap(n.in)}if(t!=="in"){if(s=jt(r,o,n,n.out,i),r&&s)return s;o.wrap(n.out)}}if(e!=="directed"&&(s=jt(r,o,n,n.undirected,i),r&&s))return s}function _l(r,e,t){if(r!=="mixed"){if(r==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const n=[];return ai(!1,r,e,t,function(i){n.push(i)}),n}function Vt(r,e,t){const n=Object.keys(t),i=n.length;let o=0;return{[Symbol.iterator](){return this},next(){let s=null;do{if(o>=i)return r&&r.wrap(t),{done:!0};const a=t[n[o++]],u=a.source,h=a.target;if(s=u===e?h:u,r&&r.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}}}}function Al(r,e,t){if(r!=="mixed"){if(r==="undirected")return Vt(null,t,t.undirected);if(typeof e=="string")return Vt(null,t,t[e])}let n=Bt();const i=new Jr;return r!=="undirected"&&(e!=="out"&&(n=He(n,Vt(i,t,t.in))),e!=="in"&&(n=He(n,Vt(i,t,t.out)))),r!=="directed"&&(n=He(n,Vt(i,t,t.undirected))),n}function xl(r,e){const{name:t,type:n,direction:i}=e;r.prototype[t]=function(o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new _(`Graph.${t}: could not find the "${o}" node in the graph.`);return _l(n==="mixed"?this.type:n,i,s)}}function Tl(r,e){const{name:t,type:n,direction:i}=e,o="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[o]=function(h,l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;h=""+h;const c=this._nodes.get(h);if(typeof c>"u")throw new _(`Graph.${o}: could not find the "${h}" node in the graph.`);ai(!1,n==="mixed"?this.type:n,i,c,l)};const s="map"+t[0].toUpperCase()+t.slice(1);r.prototype[s]=function(h,l){const c=[];return this[o](h,(d,f)=>{c.push(l(d,f))}),c};const a="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[a]=function(h,l){const c=[];return this[o](h,(d,f)=>{l(d,f)&&c.push(d)}),c};const u="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(h,l,c){if(arguments.length<3)throw new A(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=c;return this[o](h,(f,g)=>{d=l(d,f,g)}),d}}function Sl(r,e){const{name:t,type:n,direction:i}=e,o=t[0].toUpperCase()+t.slice(1,-1),s="find"+o;r.prototype[s]=function(h,l){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;h=""+h;const c=this._nodes.get(h);if(typeof c>"u")throw new _(`Graph.${s}: could not find the "${h}" node in the graph.`);return ai(!0,n==="mixed"?this.type:n,i,c,l)};const a="some"+o;r.prototype[a]=function(h,l){return!!this[s](h,l)};const u="every"+o;r.prototype[u]=function(h,l){return!this[s](h,(d,f)=>!l(d,f))}}function Cl(r,e){const{name:t,type:n,direction:i}=e,o=t.slice(0,-1)+"Entries";r.prototype[o]=function(s){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return Bt();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new _(`Graph.${o}: could not find the "${s}" node in the graph.`);return Al(n==="mixed"?this.type:n,i,a)}}function Rl(r){El.forEach(e=>{xl(r,e),Tl(r,e),Sl(r,e),Cl(r,e)})}function wr(r,e,t,n,i){const o=n._nodes.values(),s=n.type;let a,u,h,l,c,d;for(;a=o.next(),a.done!==!0;){let f=!1;if(u=a.value,s!=="undirected"){l=u.out;for(h in l){c=l[h];do d=c.target,f=!0,i(u.key,d.key,u.attributes,d.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}if(s!=="directed"){l=u.undirected;for(h in l)if(!(e&&u.key>h)){c=l[h];do d=c.target,d.key!==h&&(d=c.source),f=!0,i(u.key,d.key,u.attributes,d.attributes,c.key,c.attributes,c.undirected),c=c.next;while(c)}}t&&!f&&i(u.key,null,u.attributes,null,null,null,null)}}function kl(r,e){const t={key:r};return Ts(e.attributes)||(t.attributes=K({},e.attributes)),t}function Dl(r,e,t){const n={key:e,source:t.source.key,target:t.target.key};return Ts(t.attributes)||(n.attributes=K({},t.attributes)),r==="mixed"&&t.undirected&&(n.undirected=!0),n}function Ll(r){if(!q(r))throw new A('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in r))throw new A("Graph.import: serialized node is missing its key.");if("attributes"in r&&(!q(r.attributes)||r.attributes===null))throw new A("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Nl(r){if(!q(r))throw new A('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in r))throw new A("Graph.import: serialized edge is missing its source.");if(!("target"in r))throw new A("Graph.import: serialized edge is missing its target.");if("attributes"in r&&(!q(r.attributes)||r.attributes===null))throw new A("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in r&&typeof r.undirected!="boolean")throw new A("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Fl=Ph(),Gl=new Set(["directed","undirected","mixed"]),Ki=new Set(["domain","_events","_eventsCount","_maxListeners"]),Pl=[{name:r=>`${r}Edge`,generateKey:!0},{name:r=>`${r}DirectedEdge`,generateKey:!0,type:"directed"},{name:r=>`${r}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:r=>`${r}EdgeWithKey`},{name:r=>`${r}DirectedEdgeWithKey`,type:"directed"},{name:r=>`${r}UndirectedEdgeWithKey`,type:"undirected"}],Ml={allowSelfLoops:!0,multi:!1,type:"mixed"};function Il(r,e,t){if(t&&!q(t))throw new A(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},r._nodes.has(e))throw new S(`Graph.addNode: the "${e}" node already exist in the graph.`);const n=new r.NodeDataClass(e,t);return r._nodes.set(e,n),r.emit("nodeAdded",{key:e,attributes:t}),n}function Yi(r,e,t){const n=new r.NodeDataClass(e,t);return r._nodes.set(e,n),r.emit("nodeAdded",{key:e,attributes:t}),n}function Fs(r,e,t,n,i,o,s,a){if(!n&&r.type==="undirected")throw new S(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new S(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!q(a))throw new A(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!r.allowSelfLoops&&o===s)throw new S(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=r._nodes.get(o),h=r._nodes.get(s);if(!u)throw new _(`Graph.${e}: source node "${o}" not found.`);if(!h)throw new _(`Graph.${e}: target node "${s}" not found.`);const l={key:null,undirected:n,source:o,target:s,attributes:a};if(t)i=r._edgeKeyGenerator();else if(i=""+i,r._edges.has(i))throw new S(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!r.multi&&(n?typeof u.undirected[s]<"u":typeof u.out[s]<"u"))throw new S(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const c=new zt(n,i,u,h,a);r._edges.set(i,c);const d=o===s;return n?(u.undirectedDegree++,h.undirectedDegree++,d&&(u.undirectedLoops++,r._undirectedSelfLoopCount++)):(u.outDegree++,h.inDegree++,d&&(u.directedLoops++,r._directedSelfLoopCount++)),r.multi?c.attachMulti():c.attach(),n?r._undirectedSize++:r._directedSize++,l.key=i,r.emit("edgeAdded",l),i}function Ol(r,e,t,n,i,o,s,a,u){if(!n&&r.type==="undirected")throw new S(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&r.type==="directed")throw new S(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(u){if(typeof a!="function")throw new A(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!q(a))throw new A(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let h;if(u&&(h=a,a=void 0),!r.allowSelfLoops&&o===s)throw new S(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let l=r._nodes.get(o),c=r._nodes.get(s),d,f;if(!t&&(d=r._edges.get(i),d)){if((d.source.key!==o||d.target.key!==s)&&(!n||d.source.key!==s||d.target.key!==o))throw new S(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${d.source.key}", "${d.target.key}").`);f=d}if(!f&&!r.multi&&l&&(f=n?l.undirected[s]:l.out[s]),f){const m=[f.key,!1,!1,!1];if(u?!h:!a)return m;if(u){const y=f.attributes;f.attributes=h(y),r.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else K(f.attributes,a),r.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return m}a=a||{},u&&h&&(a=h(a));const g={key:null,undirected:n,source:o,target:s,attributes:a};if(t)i=r._edgeKeyGenerator();else if(i=""+i,r._edges.has(i))throw new S(`Graph.${e}: the "${i}" edge already exists in the graph.`);let p=!1,v=!1;l||(l=Yi(r,o,{}),p=!0,o===s&&(c=l,v=!0)),c||(c=Yi(r,s,{}),v=!0),d=new zt(n,i,l,c,a),r._edges.set(i,d);const w=o===s;return n?(l.undirectedDegree++,c.undirectedDegree++,w&&(l.undirectedLoops++,r._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,w&&(l.directedLoops++,r._directedSelfLoopCount++)),r.multi?d.attachMulti():d.attach(),n?r._undirectedSize++:r._directedSize++,g.key=i,r.emit("edgeAdded",g),[i,!0,p,v]}function bt(r,e){r._edges.delete(e.key);const{source:t,target:n,attributes:i}=e,o=e.undirected,s=t===n;o?(t.undirectedDegree--,n.undirectedDegree--,s&&(t.undirectedLoops--,r._undirectedSelfLoopCount--)):(t.outDegree--,n.inDegree--,s&&(t.directedLoops--,r._directedSelfLoopCount--)),r.multi?e.detachMulti():e.detach(),o?r._undirectedSize--:r._directedSize--,r.emit("edgeDropped",{key:e.key,attributes:i,source:t.key,target:n.key,undirected:o})}class I extends xs.EventEmitter{constructor(e){if(super(),e=K({},Ml,e),typeof e.multi!="boolean")throw new A(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Gl.has(e.type))throw new A(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new A(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?Ss:e.type==="directed"?Cs:Rs;ge(this,"NodeDataClass",t);const n="geid_"+Fl()+"_";let i=0;const o=()=>{let s;do s=n+i++;while(this._edges.has(s));return s};ge(this,"_attributes",{}),ge(this,"_nodes",new Map),ge(this,"_edges",new Map),ge(this,"_directedSize",0),ge(this,"_undirectedSize",0),ge(this,"_directedSelfLoopCount",0),ge(this,"_undirectedSelfLoopCount",0),ge(this,"_edgeKeyGenerator",o),ge(this,"_options",e),Ki.forEach(s=>ge(this,s,this[s])),Ee(this,"order",()=>this._nodes.size),Ee(this,"size",()=>this._edges.size),Ee(this,"directedSize",()=>this._directedSize),Ee(this,"undirectedSize",()=>this._undirectedSize),Ee(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Ee(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Ee(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Ee(this,"multi",this._options.multi),Ee(this,"type",this._options.type),Ee(this,"allowSelfLoops",this._options.allowSelfLoops),Ee(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+e,i=this._edges.get(n);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.out.hasOwnProperty(t):!1}throw new A(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+e,i=this._edges.get(n);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?n.undirected.hasOwnProperty(t):!1}throw new A(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const n=""+e;return this._edges.has(n)}else if(arguments.length===2){e=""+e,t=""+t;const n=this._nodes.get(e);return n?typeof n.out<"u"&&n.out.hasOwnProperty(t)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(t):!1}throw new A(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new S("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(e);if(!n)throw new _(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const i=n.out&&n.out[t]||void 0;if(i)return i.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new S("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(e);if(!n)throw new _(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const i=n.undirected&&n.undirected[t]||void 0;if(i)return i.key}edge(e,t){if(this.multi)throw new S("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _(`Graph.edge: could not find the "${t}" target node in the graph.`);const i=n.out&&n.out[t]||n.undirected&&n.undirected[t]||void 0;if(i)return i.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in||t in n.out}areOutNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.out}areInNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in n.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in n.undirected}areNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in n.in||t in n.out)||this.type!=="directed"&&t in n.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.in||this.type!=="directed"&&t in n.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const n=this._nodes.get(e);if(!n)throw new _(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in n.out||this.type!=="directed"&&t in n.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree),n}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.outDegree),n}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.degree: could not find the "${e}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=t.undirectedDegree),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree),n}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree,i+=t.directedLoops),n-i}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.outDegree,i+=t.directedLoops),n-i}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let n=0,i=0;return this.type!=="directed"&&(n+=t.undirectedDegree,i+=t.undirectedLoops*2),this.type!=="undirected"&&(n+=t.inDegree+t.outDegree,i+=t.directedLoops*2),n-i}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const n=this._edges.get(t);if(!n)throw new _(`Graph.opposite: could not find the "${t}" edge in the graph.`);const i=n.source.key,o=n.target.key;if(e===i)return o;if(e===o)return i;throw new _(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${i}, ${o}).`)}hasExtremity(e,t){e=""+e,t=""+t;const n=this._edges.get(e);if(!n)throw new _(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return n.source.key===t||n.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return Il(this,e,t).key}mergeNode(e,t){if(t&&!q(t))throw new A(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let n=this._nodes.get(e);return n?(t&&(K(n.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:n.attributes,data:t})),[e,!1]):(n=new this.NodeDataClass(e,t),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new A(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let n=this._nodes.get(e);if(n){if(t){const o=n.attributes;n.attributes=t(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:n.attributes})}return[e,!1]}const i=t?t({}):{};return n=new this.NodeDataClass(e,i),this._nodes.set(e,n),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _(`Graph.dropNode: could not find the "${e}" node in the graph.`);let n;if(this.type!=="undirected"){for(const i in t.out){n=t.out[i];do bt(this,n),n=n.next;while(n)}for(const i in t.in){n=t.in[i];do bt(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const i in t.undirected){n=t.undirected[i];do bt(this,n),n=n.next;while(n)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const n=""+arguments[0],i=""+arguments[1];if(t=me(this,n,i,this.type),!t)throw new _(`Graph.dropEdge: could not find the "${n}" -> "${i}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new _(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return bt(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new S("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new S("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const n=me(this,e,t,"directed");if(!n)throw new _(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return bt(this,n),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new S("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new S("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=me(this,e,t,"undirected");if(!n)throw new _(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return bt(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new A("Graph.updateAttribute: updater should be a function.");const n=this._attributes[e];return this._attributes[e]=t(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!q(e))throw new A("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!q(e))throw new A("Graph.mergeAttributes: provided attributes are not a plain object.");return K(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new A("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new A("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!Vi(t))throw new A("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let i,o;for(;i=n.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new A("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!Vi(t))throw new A("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let i,o,s,a;for(;i=n.next(),i.done!==!0;)o=i.value,s=o.source,a=o.target,o.attributes=e(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new A("Graph.forEachAdjacencyEntry: expecting a callback.");wr(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new A("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");wr(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new A("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");wr(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new A("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");wr(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new A("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),n.done!==!0;)i=n.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new A("Graph.findNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),n.done!==!0;)if(i=n.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new A("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let n,i;const o=new Array(this.order);let s=0;for(;n=t.next(),n.done!==!0;)i=n.value,o[s++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new A("Graph.someNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),n.done!==!0;)if(i=n.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new A("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let n,i;for(;n=t.next(),n.done!==!0;)if(i=n.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new A("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let n,i;const o=[];for(;n=t.next(),n.done!==!0;)i=n.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,t){if(typeof e!="function")throw new A("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new A("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=t;const i=this._nodes.values();let o,s;for(;o=i.next(),o.done!==!0;)s=o.value,n=e(n,s.key,s.attributes);return n}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const n=t.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((i,o)=>{e[t++]=kl(o,i)});const n=new Array(this._edges.size);return t=0,this._edges.forEach((i,o)=>{n[t++]=Dl(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:n}}import(e,t=!1){if(e instanceof I)return e.forEachNode((u,h)=>{t?this.mergeNode(u,h):this.addNode(u,h)}),e.forEachEdge((u,h,l,c,d,f,g)=>{t?g?this.mergeUndirectedEdgeWithKey(u,l,c,h):this.mergeDirectedEdgeWithKey(u,l,c,h):g?this.addUndirectedEdgeWithKey(u,l,c,h):this.addDirectedEdgeWithKey(u,l,c,h)}),this;if(!q(e))throw new A("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!q(e.attributes))throw new A("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let n,i,o,s,a;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new A("Graph.import: invalid nodes. Expecting an array.");for(n=0,i=o.length;n<i;n++){s=o[n],Ll(s);const{key:u,attributes:h}=s;t?this.mergeNode(u,h):this.addNode(u,h)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=e.edges,!Array.isArray(o))throw new A("Graph.import: invalid edges. Expecting an array.");for(n=0,i=o.length;n<i;n++){a=o[n],Nl(a);const{source:h,target:l,attributes:c,undirected:d=u}=a;let f;"key"in a?(f=t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,h,l,c)):(f=t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,h,l,c))}}return this}nullCopy(e){const t=new I(K({},this._options,e));return t.replaceAttributes(K({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((n,i)=>{const o=K({},n.attributes);n=new t.NodeDataClass(i,o),t._nodes.set(i,n)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new S(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new S("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new S("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),n=this._edges.values();let i,o;for(;i=n.next(),i.done!==!0;)o=i.value,Fs(t,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,K({},o.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});const t={},n={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let u="",h=o.source.key,l=o.target.key,c;o.undirected&&h>l&&(c=h,h=l,l=c);const d=`(${h})${a}(${l})`;s.startsWith("geid_")?this.multi&&(typeof n[d]>"u"?n[d]=0:n[d]++,u+=`${n[d]}. `):u+=`[${s}]: `,u+=d,t[u]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Ki.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=t,ge(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(I.prototype[Symbol.for("nodejs.util.inspect.custom")]=I.prototype.inspect);Pl.forEach(r=>{["add","merge","update"].forEach(e=>{const t=r.name(e),n=e==="add"?Fs:Ol;r.generateKey?I.prototype[t]=function(i,o,s){return n(this,t,!0,(r.type||this.type)==="undirected",null,i,o,s,e==="update")}:I.prototype[t]=function(i,o,s,a){return n(this,t,!1,(r.type||this.type)==="undirected",i,o,s,a,e==="update")}})});Kh(I);il(I);bl(I);Rl(I);class Gs extends I{constructor(e){const t=K({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new A("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new A('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ps extends I{constructor(e){const t=K({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new A("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new A('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Ms extends I{constructor(e){const t=K({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new A("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class Is extends I{constructor(e){const t=K({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new A("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new A('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class Os extends I{constructor(e){const t=K({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new A("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new A('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function Ht(r){r.from=function(e,t){const n=K({},e.options,t),i=new r(n);return i.import(e),i}}Ht(I);Ht(Gs);Ht(Ps);Ht(Ms);Ht(Is);Ht(Os);I.Graph=I;I.DirectedGraph=Gs;I.UndirectedGraph=Ps;I.MultiGraph=Ms;I.MultiDirectedGraph=Is;I.MultiUndirectedGraph=Os;I.InvalidArgumentsGraphError=A;I.NotFoundGraphError=_;I.UsageGraphError=S;var Wt={},Qr=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"};const $l=Ch(Qr);function Me(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=function(){return this});Me.of=function(){var r=arguments,e=r.length,t=0;return new Me(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};Me.empty=function(){var r=new Me(function(){return{done:!0}});return r};Me.fromSequence=function(r){var e=0,t=r.length;return new Me(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};Me.is=function(r){return r instanceof Me?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};var Ul=Me,ui={};ui.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";ui.SYMBOL_SUPPORT=typeof Symbol<"u";var $s=ui,Bl=$s.ARRAY_BUFFER_SUPPORT,zl=$s.SYMBOL_SUPPORT,hi=function(e,t){var n,i,o,s,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Bl&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(o=0,s=e.length;o<s;o++)t(e[o],o);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(zl&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(n=e,o=0;a=n.next(),a.done!==!0;)t(a.value,o),o++;return}for(i in e)e.hasOwnProperty(i)&&t(e[i],i)},Us=Ul,Hl=hi;function j(){this.clear()}j.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};j.prototype.enqueue=function(r){return this.items.push(r),++this.size};j.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};j.prototype.peek=function(){if(this.size)return this.items[this.offset]};j.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.offset,n=0,i=this.items.length;t<i;t++,n++)r.call(e,this.items[t],n,this)};j.prototype.toArray=function(){return this.items.slice(this.offset)};j.prototype.values=function(){var r=this.items,e=this.offset;return new Us(function(){if(e>=r.length)return{done:!0};var t=r[e];return e++,{value:t,done:!1}})};j.prototype.entries=function(){var r=this.items,e=this.offset,t=0;return new Us(function(){if(e>=r.length)return{done:!0};var n=r[e];return e++,{value:[t++,n],done:!1}})};typeof Symbol<"u"&&(j.prototype[Symbol.iterator]=j.prototype.values);j.prototype.toString=function(){return this.toArray().join(",")};j.prototype.toJSON=function(){return this.toArray()};j.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:j,enumerable:!1}),r};typeof Symbol<"u"&&(j.prototype[Symbol.for("nodejs.util.inspect.custom")]=j.prototype.inspect);j.from=function(r){var e=new j;return Hl(r,function(t){e.enqueue(t)}),e};j.of=function(){return j.from(arguments)};var Wl=j,jl=function(e,t){var n=t.length;if(n!==0){var i=e.length;e.length+=n;for(var o=0;o<n;o++)e[i+o]=t[o]}},li=Qr,Vl=Wl,Kl=jl;function Yl(r,e,t){if(!li(r))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!r.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!r.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" target node does not exist in the given graph.');if(e=""+e,t=""+t,e===t)return[e];var n=r.inboundNeighbors.bind(r),i=r.outboundNeighbors.bind(r),o={},s={};o[e]=null,s[t]=null;var a=[e],u=[t],h,l,c,d,f,g,p,v,w=!1;e:for(;a.length&&u.length;)if(a.length<=u.length){for(h=a,a=[],f=0,p=h.length;f<p;f++)for(l=h[f],c=i(l),g=0,v=c.length;g<v;g++)if(d=c[g],d in o||(a.push(d),o[d]=l),d in s){w=!0;break e}}else for(h=u,u=[],f=0,p=h.length;f<p;f++)for(l=h[f],c=n(l),g=0,v=c.length;g<v;g++)if(d=c[g],d in s||(u.push(d),s[d]=l),d in o){w=!0;break e}if(!w)return null;for(var m=[];d;)m.unshift(d),d=o[d];for(d=s[m[m.length-1]];d;)m.push(d),d=s[d];return m.length?m:null}function ql(r,e){if(!li(r))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!r.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var t={},n={},i,o,s,a,u,h;for(t[e]=!0,n[e]=[e];Object.keys(t).length;){i=t,t={};for(s in i)for(o=r.outboundNeighbors(s),u=0,h=o.length;u<h;u++)a=o[u],n[a]||(n[a]=n[s].concat(a),t[a]=!0)}return n}function Bs(r,e,t){if(!li(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(t))throw new Error('graphology-shortest-path: the "'+t+'" source node does not exist in the given graph.');t=""+t;var n=new Set,i={},o=0;i[t]=0;for(var s=[t],a,u,h;s.length!==0;){var l=[];for(a=0,u=s.length;a<u;a++)h=s[a],!n.has(h)&&(n.add(h),Kl(l,e[r](h)),i[h]=o);o++,s=l}return i}var Xl=Bs.bind(null,"outboundNeighbors"),Zl=Bs.bind(null,"neighbors");function Jl(r,e){e=""+e;var t=[],n={},i={},o=r.nodes(),s,a,u,h,l,c,d,f,g;for(c=0,f=o.length;c<f;c++)h=o[c],n[h]=[],i[h]=0;var p={};i[e]=1,p[e]=0;for(var v=Vl.of(e);v.size;)for(h=v.dequeue(),t.push(h),s=p[h],a=i[h],u=r.outboundNeighbors(h),d=0,g=u.length;d<g;d++)l=u[d],l in p||(v.enqueue(l),p[l]=s+1),p[l]===s+1&&(i[l]+=a,n[l].push(h));return[t,n,i]}Wt.bidirectional=Yl;Wt.singleSource=ql;Wt.singleSourceLength=Xl;Wt.undirectedSingleSourceLength=Zl;Wt.brandes=Jl;var ci={},ur={};function Ql(r){return typeof r!="number"||isNaN(r)?1:r}function ec(r,e){var t={},n=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(n=e);var i=function(s){return n(s[r])},o=function(){return n(void 0)};return typeof r=="string"?(t.fromAttributes=i,t.fromGraph=function(s,a){return i(s.getNodeAttributes(a))},t.fromEntry=function(s,a){return i(a)}):typeof r=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},t.fromGraph=function(s,a){return n(r(a,s.getNodeAttributes(a)))},t.fromEntry=function(s,a){return n(r(s,a))}):(t.fromAttributes=o,t.fromGraph=o,t.fromEntry=o),t}function zs(r,e){var t={},n=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(n=e);var i=function(s){return n(s[r])},o=function(){return n(void 0)};return typeof r=="string"?(t.fromAttributes=i,t.fromGraph=function(s,a){return i(s.getEdgeAttributes(a))},t.fromEntry=function(s,a){return i(a)},t.fromPartialEntry=t.fromEntry,t.fromMinimalEntry=t.fromEntry):typeof r=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},t.fromGraph=function(s,a){var u=s.extremities(a);return n(r(a,s.getEdgeAttributes(a),u[0],u[1],s.getNodeAttributes(u[0]),s.getNodeAttributes(u[1]),s.isUndirected(a)))},t.fromEntry=function(s,a,u,h,l,c,d){return n(r(s,a,u,h,l,c,d))},t.fromPartialEntry=function(s,a,u,h){return n(r(s,a,u,h))},t.fromMinimalEntry=function(s,a){return n(r(s,a))}):(t.fromAttributes=o,t.fromGraph=o,t.fromEntry=o,t.fromMinimalEntry=o),t}ur.createNodeValueGetter=ec;ur.createEdgeValueGetter=zs;ur.createEdgeWeightGetter=function(r){return zs(r,Ql)};var hr={},tc=function(r,e){return r<e?-1:r>e?1:0},rc=function(r,e){return r<e?1:r>e?-1:0};function nc(r){return function(e,t){return r(t,e)}}function ic(r){return r===2?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(e,t){for(var n=0;n<r;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n++}return 0}}hr.DEFAULT_COMPARATOR=tc;hr.DEFAULT_REVERSE_COMPARATOR=rc;hr.reverseComparator=nc;hr.createTupleComparator=ic;var lr={},Hs={};(function(r){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,n=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;r.getPointerArray=function(u){var h=u-1;if(h<=e)return Uint8Array;if(h<=t)return Uint16Array;if(h<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},r.getSignedPointerArray=function(u){var h=u-1;return h<=i?Int8Array:h<=o?Int16Array:h<=s?Int32Array:Float64Array},r.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};r.getMinimalRepresentation=function(u,h){var l=null,c=0,d,f,g,p,v;for(p=0,v=u.length;p<v;p++)g=h?h(u[p]):u[p],f=r.getNumberType(g),d=a[f.name],d>c&&(c=d,l=f);return l},r.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},r.concat=function(){var u=0,h,l,c;for(h=0,c=arguments.length;h<c;h++)u+=arguments[h].length;var d=new arguments[0].constructor(u);for(h=0,l=0;h<c;h++)d.set(arguments[h],l),l+=arguments[h].length;return d},r.indices=function(u){for(var h=r.getPointerArray(u),l=new h(u),c=0;c<u;c++)l[c]=c;return l}})(Hs);var Ws=hi,js=Hs;function oc(r){return Array.isArray(r)||js.isTypedArray(r)}function di(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function sc(r){var e=di(r),t=typeof e=="number"?new Array(e):[],n=0;return Ws(r,function(i){t[n++]=i}),t}function ac(r){var e=di(r),t=typeof e=="number"?js.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new t(e):[],o=0;return Ws(r,function(s){n[o]=s,i[o]=o++}),[n,i]}lr.isArrayLike=oc;lr.guessLength=di;lr.toArray=sc;lr.toArrayWithIndices=ac;var Br=hi,Vs=hr,Ge=lr,en=Vs.DEFAULT_COMPARATOR,fi=Vs.reverseComparator;function gi(r,e,t,n){for(var i=e[n],o,s;n>t;){if(o=n-1>>1,s=e[o],r(i,s)<0){e[n]=s,n=o;continue}break}e[n]=i}function cr(r,e,t){for(var n=e.length,i=t,o=e[t],s=2*t+1,a;s<n;)a=s+1,a<n&&r(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=2*t+1;e[t]=o,gi(r,e,i,t)}function Ks(r,e,t){e.push(t),gi(r,e,0,e.length-1)}function pi(r,e){var t=e.pop();if(e.length!==0){var n=e[0];return e[0]=t,cr(r,e,0),n}return t}function Ft(r,e,t){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var n=e[0];return e[0]=t,cr(r,e,0),n}function Ys(r,e,t){var n;return e.length!==0&&r(e[0],t)<0&&(n=e[0],e[0]=t,t=n,cr(r,e,0)),t}function vt(r,e){for(var t=e.length,n=t>>1,i=n;--i>=0;)cr(r,e,i)}function vi(r,e){for(var t=e.length,n=0,i=new Array(t);n<t;)i[n++]=pi(r,e);return i}function uc(r,e,t){arguments.length===2&&(t=e,e=r,r=en);var n=fi(r),i,o,s,a=1/0,u;if(e===1){if(Ge.isArrayLike(t)){for(i=0,o=t.length;i<o;i++)s=t[i],(a===1/0||r(s,a)<0)&&(a=s);return u=new t.constructor(1),u[0]=a,u}return Br(t,function(l){(a===1/0||r(l,a)<0)&&(a=l)}),[a]}if(Ge.isArrayLike(t)){if(e>=t.length)return t.slice().sort(r);for(u=t.slice(0,e),vt(n,u),i=e,o=t.length;i<o;i++)n(t[i],u[0])>0&&Ft(n,u,t[i]);return u.sort(r)}var h=Ge.guessLength(t);return h!==null&&h<e&&(e=h),u=new Array(e),i=0,Br(t,function(l){i<e?u[i]=l:(i===e&&vt(n,u),n(l,u[0])>0&&Ft(n,u,l)),i++}),u.length>i&&(u.length=i),u.sort(r)}function hc(r,e,t){arguments.length===2&&(t=e,e=r,r=en);var n=fi(r),i,o,s,a=-1/0,u;if(e===1){if(Ge.isArrayLike(t)){for(i=0,o=t.length;i<o;i++)s=t[i],(a===-1/0||r(s,a)>0)&&(a=s);return u=new t.constructor(1),u[0]=a,u}return Br(t,function(l){(a===-1/0||r(l,a)>0)&&(a=l)}),[a]}if(Ge.isArrayLike(t)){if(e>=t.length)return t.slice().sort(n);for(u=t.slice(0,e),vt(r,u),i=e,o=t.length;i<o;i++)r(t[i],u[0])>0&&Ft(r,u,t[i]);return u.sort(n)}var h=Ge.guessLength(t);return h!==null&&h<e&&(e=h),u=new Array(e),i=0,Br(t,function(l){i<e?u[i]=l:(i===e&&vt(r,u),r(l,u[0])>0&&Ft(r,u,l)),i++}),u.length>i&&(u.length=i),u.sort(n)}function O(r){if(this.clear(),this.comparator=r||en,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}O.prototype.clear=function(){this.items=[],this.size=0};O.prototype.push=function(r){return Ks(this.comparator,this.items,r),++this.size};O.prototype.peek=function(){return this.items[0]};O.prototype.pop=function(){return this.size!==0&&this.size--,pi(this.comparator,this.items)};O.prototype.replace=function(r){return Ft(this.comparator,this.items,r)};O.prototype.pushpop=function(r){return Ys(this.comparator,this.items,r)};O.prototype.consume=function(){return this.size=0,vi(this.comparator,this.items)};O.prototype.toArray=function(){return vi(this.comparator,this.items.slice())};O.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:O,enumerable:!1}),r};typeof Symbol<"u"&&(O.prototype[Symbol.for("nodejs.util.inspect.custom")]=O.prototype.inspect);function zr(r){if(this.clear(),this.comparator=r||en,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=fi(this.comparator)}zr.prototype=O.prototype;O.from=function(r,e){var t=new O(e),n;return Ge.isArrayLike(r)?n=r.slice():n=Ge.toArray(r),vt(t.comparator,n),t.items=n,t.size=n.length,t};zr.from=function(r,e){var t=new zr(e),n;return Ge.isArrayLike(r)?n=r.slice():n=Ge.toArray(r),vt(t.comparator,n),t.items=n,t.size=n.length,t};O.siftUp=cr;O.siftDown=gi;O.push=Ks;O.pop=pi;O.replace=Ft;O.pushpop=Ys;O.heapify=vt;O.consume=vi;O.nsmallest=uc;O.nlargest=hc;O.MinHeap=O;O.MaxHeap=zr;var qs=O,Xs=Qr,mi=ur.createEdgeWeightGetter,Hr=qs,yi="weight";function Mn(r,e){return r[0]>e[0]?1:r[0]<e[0]?-1:r[1]>e[1]?1:r[1]<e[1]?-1:r[2]>e[2]?1:r[2]<e[2]?-1:0}function lc(r,e){return r[0]>e[0]?1:r[0]<e[0]?-1:r[1]>e[1]?1:r[1]<e[1]?-1:r[2]>e[2]?1:r[2]<e[2]?-1:r[3]>e[3]?1:r[3]<e[3]?-1:0}function cc(r,e,t,n){if(e=""+e,t=""+t,!Xs(r))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");if(e&&!r.hasNode(e))throw new Error('graphology-shortest-path/dijkstra: the "'+e+'" source node does not exist in the given graph.');if(t&&!r.hasNode(t))throw new Error('graphology-shortest-path/dijkstra: the "'+t+'" target node does not exist in the given graph.');if(n=mi(n||yi).fromMinimalEntry,e===t)return[0,[e]];var i=[{},{}],o=[{},{}],s=[new Hr(Mn),new Hr(Mn)],a=[{},{}];o[0][e]=[e],o[1][t]=[t],a[0][e]=0,a[1][t]=0;var u=[],h=1/0,l=0,c=1,d,f,g,p,v,w,m,y,E;for(s[0].push([0,l++,e]),s[1].push([0,l++,t]);s[0].size&&s[1].size;)if(c=1-c,d=s[c].pop(),p=d[0],v=d[2],!(v in i[c])){if(i[c][v]=p,v in i[1-c])return[h,u];for(f=c===1?r.inboundEdges(v):r.outboundEdges(v),y=0,E=f.length;y<E;y++){if(m=f[y],w=r.opposite(v,m),g=i[c][v]+n(m,r.getEdgeAttributes(m)),w in i[c]&&g<i[c][w])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(w in a[c])||g<a[c][w])&&(a[c][w]=g,s[c].push([g,l++,w]),o[c][w]=o[c][v].concat(w),w in a[0]&&w in a[1]&&(p=a[0][w]+a[1][w],(u.length===0||h>p)&&(h=p,u=o[0][w].concat(o[1][w].slice(0,-1).reverse()))))}}return[1/0,null]}function dc(r,e,t,n,i,o){if(!Xs(r))throw new Error("graphology-shortest-path/dijkstra: invalid graphology instance.");t=mi(t||yi).fromMinimalEntry;var s={},a={},u=new Hr(Mn),h=0,l,c,d,f,g,p,v,w,m,y,E;for(w=0,y=e.length;w<y;w++)f=e[w],a[f]=0,u.push([0,h++,f]),o&&(o[f]=[f]);for(;u.size;)if(c=u.pop(),v=c[0],f=c[2],!(f in s)){if(s[f]=v,f===i)break;for(l=r.outboundEdges(f),m=0,E=l.length;m<E;m++){if(p=l[m],g=r.opposite(f,p),d=t(p,r.getEdgeAttributes(p))+s[f],g in s&&d<s[g])throw Error("graphology-shortest-path/dijkstra: contradictory paths found. Do some of your edges have a negative weight?");(!(g in a)||d<a[g])&&(a[g]=d,u.push([d,h++,g]),o&&(o[g]=o[f].concat(g)))}}return s}function fc(r,e,t){var n={};return dc(r,[e],t,0,null,n),n}function gc(r,e,t,n){return cc(r,e,t,n)[1]}function pc(r,e,t){e=""+e,t=mi(t||yi).fromMinimalEntry;var n=[],i={},o={},s=r.nodes(),a,u,h,l,c,d,f,g,p,v;for(p=0,v=s.length;p<v;p++)d=s[p],i[d]=[],o[d]=0;var w={};o[e]=1;var m={};m[e]=0;var y=0,E=new Hr(lc);for(E.push([0,y++,e,e]);E.size;)if(u=E.pop(),l=u[0],h=u[2],d=u[3],!(d in w))for(o[d]+=o[h],n.push(d),w[d]=l,a=r.outboundEdges(d),p=0,v=a.length;p<v;p++)g=a[p],f=r.opposite(d,g),c=l+t(g,r.getEdgeAttributes(g)),!(f in w)&&(!(f in m)||c<m[f])?(m[f]=c,E.push([c,y++,d,f]),o[f]=0,i[f]=[d]):c===m[f]&&(o[f]+=o[d],i[f].push(d));return[n,i,o]}ci.bidirectional=gc;ci.singleSource=fc;ci.brandes=pc;var vc={},mc=Qr,yc=ur.createEdgeWeightGetter,wc=qs,bc="weight";function Ec(r,e){return r[0]>e[0]?1:r[0]<e[0]?-1:r[1]>e[1]?1:r[1]<e[1]?-1:0}function _c(r,e,t,n,i,o){if(!mc(r))throw new Error("graphology-shortest-path/astar: invalid graphology instance.");if(e&&!r.hasNode(e))throw new Error('graphology-shortest-path/astar: the "'+e+'" source node does not exist in the given graph.');if(t&&!r.hasNode(t))throw new Error('graphology-shortest-path/astar: the "'+t+'" target node does not exist in the given graph.');if(n=yc(n||bc).fromMinimalEntry,e===t)return[e];i=i||function(){return 0},o=o||{};var s=0,a=new wc(Ec);a.push([0,s++,e,0,null]);var u={},h={},l,c,d,f,g,p,v,w,m,y,E,k;function L(T,G,D,z){if(k=c===D?z:D,y=n(T,G),y!==null){if(E=f+y,u.hasOwnProperty(k)){if(d=u[k],w=d[0],m=d[1],w<=E)return}else m=i(k,t);o.cutoff&&E+m>o.cutoff||(u[k]=[E,m],a.push([E+m,s++,k,E,c]))}}for(;a.size!==0;){if(l=a.pop(),c=l[2],f=l[3],g=l[4],c===t){for(p=[c],v=g;v!==null;)p.push(v),v=h[v];return p.reverse(),p}h.hasOwnProperty(c)&&(h[c]===null||(w=u[c][0],w<f))||(h[c]=g,r.forEachOutboundEdge(c,L))}return null}vc.bidirectional=_c;var dr=Wt;dr.bidirectional;dr.singleSource;dr.singleSourceLength;dr.undirectedSingleSourceLength;dr.brandes;const wi=ar(null),Ac=ar(null),In=ar(""),xc=ar(null),Tc=ss(wi,r=>r?new Ut(r.nodes,{keys:["properties.name","id","label"],threshold:.3}):null),Sc=ss([Tc,In],([r,e])=>{const t=e.trim();return!r||!t?[]:r.search(t,{limit:20}).map(n=>n.item)});function Cc(r){const e=new I({type:"undirected"});r.nodes.forEach(t=>e.addNode(t.id,{raw:t})),r.edges.forEach(t=>{e.hasEdge(t.id)||e.addEdgeWithKey(t.id,t.source,t.target,{raw:t})}),wi.set(r),Ac.set(e)}function Rc(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Jt(r){var e=Rc(r,"string");return typeof e=="symbol"?e:e+""}function te(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qi(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Jt(n.key),n)}}function re(r,e,t){return e&&qi(r.prototype,e),t&&qi(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Gt(r){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(r)}function Zs(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zs=function(){return!!r})()}function kc(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Dc(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kc(r)}function ye(r,e,t){return e=Gt(e),Dc(r,Zs()?Reflect.construct(e,t||[],Gt(r).constructor):e.apply(r,t))}function On(r,e){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},On(r,e)}function we(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&On(r,e)}function Lc(r){if(Array.isArray(r))return r}function Nc(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,s,a=[],u=!0,h=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(l){h=!0,i=l}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(h)throw i}}return a}}function $n(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Js(r,e){if(r){if(typeof r=="string")return $n(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$n(r,e):void 0}}function Fc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(r,e){return Lc(r)||Nc(r,e)||Js(r,e)||Fc()}var gn={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Qs=new Int8Array(4),pn=new Int32Array(Qs.buffer,0,1),Gc=new Float32Array(Qs.buffer,0,1),Pc=/^\s*rgba?\s*\(/,Mc=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Ic(r){var e=0,t=0,n=0,i=1;if(r[0]==="#")r.length===4?(e=parseInt(r.charAt(1)+r.charAt(1),16),t=parseInt(r.charAt(2)+r.charAt(2),16),n=parseInt(r.charAt(3)+r.charAt(3),16)):(e=parseInt(r.charAt(1)+r.charAt(2),16),t=parseInt(r.charAt(3)+r.charAt(4),16),n=parseInt(r.charAt(5)+r.charAt(6),16)),r.length===9&&(i=parseInt(r.charAt(7)+r.charAt(8),16)/255);else if(Pc.test(r)){var o=r.match(Mc);o&&(e=+o[1],t=+o[2],n=+o[3],o[4]&&(i=+o[4]))}return{r:e,g:t,b:n,a:i}}var Ct={};for(var br in gn)Ct[br]=fr(gn[br]),Ct[gn[br]]=Ct[br];function ea(r,e,t,n,i){return pn[0]=n<<24|t<<16|e<<8|r,pn[0]=pn[0]&4278190079,Gc[0]}function fr(r){if(r=r.toLowerCase(),typeof Ct[r]<"u")return Ct[r];var e=Ic(r),t=e.r,n=e.g,i=e.b,o=e.a;o=o*255|0;var s=ea(t,n,i,o);return Ct[r]=s,s}var vn={};function ta(r){if(typeof vn[r]<"u")return vn[r];var e=(r&16711680)>>>16,t=(r&65280)>>>8,n=r&255,i=255,o=ea(e,t,n,i);return vn[r]=o,o}function Xi(r,e,t,n){return t+(e<<8)+(r<<16)}function Zi(r,e,t,n,i,o){var s=Math.floor(t/o*i),a=Math.floor(r.drawingBufferHeight/o-n/o*i),u=new Uint8Array(4);r.bindFramebuffer(r.FRAMEBUFFER,e),r.readPixels(s,a,1,1,r.RGBA,r.UNSIGNED_BYTE,u);var h=Pt(u,4),l=h[0],c=h[1],d=h[2],f=h[3];return[l,c,d,f]}function b(r,e,t){return(e=Jt(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ji(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function x(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ji(Object(t),!0).forEach(function(n){b(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ji(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Oc(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=Gt(r))!==null;);return r}function Un(){return Un=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=Oc(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},Un.apply(null,arguments)}function ra(r,e,t,n){var i=Un(Gt(r.prototype),e,t);return typeof i=="function"?function(o){return i.apply(t,o)}:i}function $c(r){return r.normalized?1:r.size}function mn(r){var e=0;return r.forEach(function(t){return e+=$c(t)}),e}function na(r,e,t){var n=r==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,i=e.createShader(n);if(i===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(i,t),e.compileShader(i);var o=e.getShaderParameter(i,e.COMPILE_STATUS);if(!o){var s=e.getShaderInfoLog(i);throw e.deleteShader(i),new Error(`loadShader: error while compiling the shader:
`.concat(s,`
`).concat(t))}return i}function Uc(r,e){return na("VERTEX",r,e)}function Bc(r,e){return na("FRAGMENT",r,e)}function zc(r,e){var t=r.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var n,i;for(n=0,i=e.length;n<i;n++)r.attachShader(t,e[n]);r.linkProgram(t);var o=r.getProgramParameter(t,r.LINK_STATUS);if(!o)throw r.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function Qi(r){var e=r.gl,t=r.buffer,n=r.program,i=r.vertexShader,o=r.fragmentShader;e.deleteShader(i),e.deleteShader(o),e.deleteProgram(n),e.deleteBuffer(t)}var eo=`#define PICKING_MODE
`,Hc=b(b(b(b(b(b(b(b({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),ia=function(){function r(e,t,n){te(this,r),b(this,"array",new Float32Array),b(this,"constantArray",new Float32Array),b(this,"capacity",0),b(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=mn(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=n,this.normalProgram=this.getProgramInfo("normal",e,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,eo+i.VERTEX_SHADER_SOURCE,eo+i.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var o=mn(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var u=0;u<a.length;u++)this.constantArray[s*o+u]=a[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return re(r,[{key:"kill",value:function(){Qi(this.normalProgram),this.pickProgram&&(Qi(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,n,i,o,s){var a=this.getDefinition(),u=n.createBuffer();if(u===null)throw new Error("Program: error while creating the WebGL buffer.");var h=Uc(n,i),l=Bc(n,o),c=zc(n,[h,l]),d={};a.UNIFORMS.forEach(function(p){var v=n.getUniformLocation(c,p);v&&(d[p]=v)});var f={};a.ATTRIBUTES.forEach(function(p){f[p.name]=n.getAttribLocation(c,p.name)});var g;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(p){f[p.name]=n.getAttribLocation(c,p.name)}),g=n.createBuffer(),g===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:c,gl:n,frameBuffer:s,buffer:u,constantBuffer:g||{},uniformLocations:d,attributeLocations:f,isPicking:t==="pick",vertexShader:h,fragmentShader:l}}},{key:"bindProgram",value:function(t){var n=this,i=0,o=t.gl,s=t.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,t.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=n.bindAttribute(a,t,i,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,t.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=n.bindAttribute(a,t,i,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),i=0,this.ATTRIBUTES.forEach(function(a){return i+=n.bindAttribute(a,t,i)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var n=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return n.unbindAttribute(i,t,!1)}),this.ATTRIBUTES.forEach(function(i){return n.unbindAttribute(i,t,!0)})):this.ATTRIBUTES.forEach(function(i){return n.unbindAttribute(i,t)})}},{key:"bindAttribute",value:function(t,n,i,o){var s=Hc[t.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var a=n.attributeLocations[t.name],u=n.gl;if(a!==-1){u.enableVertexAttribArray(a);var h=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:mn(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(a,t.size,t.type,t.normalized||!1,h,i),this.isInstanced&&o)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(a,1);else{var l=u.getExtension("ANGLE_instanced_arrays");l&&l.vertexAttribDivisorANGLE(a,1)}}return t.size*s}},{key:"unbindAttribute",value:function(t,n,i){var o=n.attributeLocations[t.name],s=n.gl;if(o!==-1&&(s.disableVertexAttribArray(o),this.isInstanced&&i))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,n){var i=n.gl,o=n.program;i.enable(i.BLEND),i.useProgram(o),this.setUniforms(t,n),this.drawWebGL(this.METHOD,n)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(x(x({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,n){var i=n.gl,o=n.frameBuffer;if(i.bindFramebuffer(i.FRAMEBUFFER,o),!this.isInstanced)i.drawArrays(t,0,this.verticesCount);else if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var s=i.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}])}(),Wc=function(r){function e(){return te(this,e),ye(this,e,arguments)}return we(e,r),re(e,[{key:"kill",value:function(){ra(e,"kill",this)([])}},{key:"process",value:function(n,i,o){var s=i*this.STRIDE;if(o.hidden){for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0;return}return this.processVisibleItem(ta(n),s,o)}}])}(ia),bi=function(r){function e(){var t;te(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=ye(this,e,[].concat(i)),b(t,"drawLabel",void 0),t}return we(e,r),re(e,[{key:"kill",value:function(){ra(e,"kill",this)([])}},{key:"process",value:function(n,i,o,s,a){var u=i*this.STRIDE;if(a.hidden||o.hidden||s.hidden){for(var h=u+this.STRIDE;u<h;u++)this.array[u]=0;return}return this.processVisibleItem(ta(n),u,o,s,a)}}])}(ia);function jc(r,e){return function(){function t(n,i,o){te(this,t),b(this,"drawLabel",e),this.programs=r.map(function(s){return new s(n,i,o)})}return re(t,[{key:"reallocate",value:function(i){this.programs.forEach(function(o){return o.reallocate(i)})}},{key:"process",value:function(i,o,s,a,u){this.programs.forEach(function(h){return h.process(i,o,s,a,u)})}},{key:"render",value:function(i){this.programs.forEach(function(o){return o.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}])}()}function Vc(r,e,t,n,i){var o=i.edgeLabelSize,s=i.edgeLabelFont,a=i.edgeLabelWeight,u=i.edgeLabelColor.attribute?e[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,h=e.label;if(h){r.fillStyle=u,r.font="".concat(a," ").concat(o,"px ").concat(s);var l=t.size,c=n.size,d=t.x,f=t.y,g=n.x,p=n.y,v=(d+g)/2,w=(f+p)/2,m=g-d,y=p-f,E=Math.sqrt(m*m+y*y);if(!(E<l+c)){d+=m*l/E,f+=y*l/E,g-=m*c/E,p-=y*c/E,v=(d+g)/2,w=(f+p)/2,m=g-d,y=p-f,E=Math.sqrt(m*m+y*y);var k=r.measureText(h).width;if(k>E){var L="";for(h=h+L,k=r.measureText(h).width;k>E&&h.length>1;)h=h.slice(0,-2)+L,k=r.measureText(h).width;if(h.length<4)return}var T;m>0?y>0?T=Math.acos(m/E):T=Math.asin(y/E):y>0?T=Math.acos(m/E)+Math.PI:T=Math.asin(m/E)+Math.PI/2,r.save(),r.translate(v,w),r.rotate(T),r.fillText(h,-k/2,e.size/2+o),r.restore()}}}function oa(r,e,t){if(e.label){var n=t.labelSize,i=t.labelFont,o=t.labelWeight,s=t.labelColor.attribute?e[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;r.fillStyle=s,r.font="".concat(o," ").concat(n,"px ").concat(i),r.fillText(e.label,e.x+e.size+3,e.y+n/3)}}function Kc(r,e,t){var n=t.labelSize,i=t.labelFont,o=t.labelWeight;r.font="".concat(o," ").concat(n,"px ").concat(i),r.fillStyle="#FFF",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor="#000";var s=2;if(typeof e.label=="string"){var a=r.measureText(e.label).width,u=Math.round(a+5),h=Math.round(n+2*s),l=Math.max(e.size,n/2)+s,c=Math.asin(h/2/l),d=Math.sqrt(Math.abs(Math.pow(l,2)-Math.pow(h/2,2)));r.beginPath(),r.moveTo(e.x+d,e.y+h/2),r.lineTo(e.x+l+u,e.y+h/2),r.lineTo(e.x+l+u,e.y-h/2),r.lineTo(e.x+d,e.y-h/2),r.arc(e.x,e.y,l,c,-c),r.closePath(),r.fill()}else r.beginPath(),r.arc(e.x,e.y,e.size+s,0,Math.PI*2),r.closePath(),r.fill();r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,oa(r,e,t)}var Yc=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,qc=Yc,Xc=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Zc=Xc,sa=WebGLRenderingContext,to=sa.UNSIGNED_BYTE,yn=sa.FLOAT,Jc=["u_sizeRatio","u_correctionRatio","u_matrix"],tn=function(r){function e(){return te(this,e),ye(this,e,arguments)}return we(e,r),re(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Zc,FRAGMENT_SHADER_SOURCE:qc,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Jc,ATTRIBUTES:[{name:"a_position",size:2,type:yn},{name:"a_size",size:1,type:yn},{name:"a_color",size:4,type:to,normalized:!0},{name:"a_id",size:4,type:to,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:yn}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(n,i,o){var s=this.array,a=fr(o.color);s[i++]=o.x,s[i++]=o.y,s[i++]=o.size,s[i++]=a,s[i++]=n}},{key:"setUniforms",value:function(n,i){var o=i.gl,s=i.uniformLocations,a=s.u_sizeRatio,u=s.u_correctionRatio,h=s.u_matrix;o.uniform1f(u,n.correctionRatio),o.uniform1f(a,n.sizeRatio),o.uniformMatrix3fv(h,!1,n.matrix)}}])}(Wc);b(tn,"ANGLE_1",0);b(tn,"ANGLE_2",2*Math.PI/3);b(tn,"ANGLE_3",4*Math.PI/3);var Qc=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,ed=Qc,td=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,rd=td,aa=WebGLRenderingContext,ro=aa.UNSIGNED_BYTE,Er=aa.FLOAT,nd=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],ua={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function ha(r){var e=x(x({},ua),{});return function(t){function n(){return te(this,n),ye(this,n,arguments)}return we(n,t),re(n,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:rd,FRAGMENT_SHADER_SOURCE:ed,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:nd,ATTRIBUTES:[{name:"a_position",size:2,type:Er},{name:"a_normal",size:2,type:Er},{name:"a_radius",size:1,type:Er},{name:"a_color",size:4,type:ro,normalized:!0},{name:"a_id",size:4,type:ro,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Er}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,h){if(e.extremity==="source"){var l=[u,a];a=l[0],u=l[1]}var c=h.size||1,d=u.size||1,f=a.x,g=a.y,p=u.x,v=u.y,w=fr(h.color),m=p-f,y=v-g,E=m*m+y*y,k=0,L=0;E&&(E=1/Math.sqrt(E),k=-y*E*c,L=m*E*c);var T=this.array;T[s++]=p,T[s++]=v,T[s++]=-k,T[s++]=-L,T[s++]=d,T[s++]=w,T[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,h=u.u_matrix,l=u.u_sizeRatio,c=u.u_correctionRatio,d=u.u_minEdgeThickness,f=u.u_lengthToThicknessRatio,g=u.u_widenessToThicknessRatio;a.uniformMatrix3fv(h,!1,o.matrix),a.uniform1f(l,o.sizeRatio),a.uniform1f(c,o.correctionRatio),a.uniform1f(d,o.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(g,e.widenessToThicknessRatio)}}])}(bi)}ha();var id=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,la=id,od=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,sd=od,ca=WebGLRenderingContext,no=ca.UNSIGNED_BYTE,st=ca.FLOAT,ad=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],ud={lengthToThicknessRatio:ua.lengthToThicknessRatio};function da(r){var e=x(x({},ud),{});return function(t){function n(){return te(this,n),ye(this,n,arguments)}return we(n,t),re(n,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:sd,FRAGMENT_SHADER_SOURCE:la,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:ad,ATTRIBUTES:[{name:"a_positionStart",size:2,type:st},{name:"a_positionEnd",size:2,type:st},{name:"a_normal",size:2,type:st},{name:"a_color",size:4,type:no,normalized:!0},{name:"a_id",size:4,type:no,normalized:!0},{name:"a_radius",size:1,type:st}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:st},{name:"a_normalCoef",size:1,type:st},{name:"a_radiusCoef",size:1,type:st}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,h){var l=h.size||1,c=a.x,d=a.y,f=u.x,g=u.y,p=fr(h.color),v=f-c,w=g-d,m=u.size||1,y=v*v+w*w,E=0,k=0;y&&(y=1/Math.sqrt(y),E=-w*y*l,k=v*y*l);var L=this.array;L[s++]=c,L[s++]=d,L[s++]=f,L[s++]=g,L[s++]=E,L[s++]=k,L[s++]=p,L[s++]=o,L[s++]=m}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,h=u.u_matrix,l=u.u_zoomRatio,c=u.u_feather,d=u.u_pixelRatio,f=u.u_correctionRatio,g=u.u_sizeRatio,p=u.u_minEdgeThickness,v=u.u_lengthToThicknessRatio;a.uniformMatrix3fv(h,!1,o.matrix),a.uniform1f(l,o.zoomRatio),a.uniform1f(g,o.sizeRatio),a.uniform1f(f,o.correctionRatio),a.uniform1f(d,o.pixelRatio),a.uniform1f(c,o.antiAliasingFeather),a.uniform1f(p,o.minEdgeThickness),a.uniform1f(v,e.lengthToThicknessRatio)}}])}(bi)}da();function hd(r){return jc([da(),ha()])}var ld=hd(),cd=ld,dd=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,fd=dd,fa=WebGLRenderingContext,io=fa.UNSIGNED_BYTE,Kt=fa.FLOAT,gd=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],pd=function(r){function e(){return te(this,e),ye(this,e,arguments)}return we(e,r),re(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:fd,FRAGMENT_SHADER_SOURCE:la,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:gd,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Kt},{name:"a_positionEnd",size:2,type:Kt},{name:"a_normal",size:2,type:Kt},{name:"a_color",size:4,type:io,normalized:!0},{name:"a_id",size:4,type:io,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Kt},{name:"a_normalCoef",size:1,type:Kt}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(n,i,o,s,a){var u=a.size||1,h=o.x,l=o.y,c=s.x,d=s.y,f=fr(a.color),g=c-h,p=d-l,v=g*g+p*p,w=0,m=0;v&&(v=1/Math.sqrt(v),w=-p*v*u,m=g*v*u);var y=this.array;y[i++]=h,y[i++]=l,y[i++]=c,y[i++]=d,y[i++]=w,y[i++]=m,y[i++]=f,y[i++]=n}},{key:"setUniforms",value:function(n,i){var o=i.gl,s=i.uniformLocations,a=s.u_matrix,u=s.u_zoomRatio,h=s.u_feather,l=s.u_pixelRatio,c=s.u_correctionRatio,d=s.u_sizeRatio,f=s.u_minEdgeThickness;o.uniformMatrix3fv(a,!1,n.matrix),o.uniform1f(u,n.zoomRatio),o.uniform1f(d,n.sizeRatio),o.uniform1f(c,n.correctionRatio),o.uniform1f(l,n.pixelRatio),o.uniform1f(h,n.antiAliasingFeather),o.uniform1f(f,n.minEdgeThickness)}}])}(bi),Ei=function(r){function e(){var t;return te(this,e),t=ye(this,e),t.rawEmitter=t,t}return we(e,r),re(e)}(xs.EventEmitter),vd=function(e){return e},md=function(e){return e*e},yd=function(e){return e*(2-e)},wd=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},bd=function(e){return e*e*e},Ed=function(e){return--e*e*e+1},_d=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},Ad={linear:vd,quadraticIn:md,quadraticOut:yd,quadraticInOut:wd,cubicIn:bd,cubicOut:Ed,cubicInOut:_d},xd={easing:"quadraticInOut",duration:150};function Ae(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function _r(r,e,t){return r[0]=e,r[4]=typeof t=="number"?t:e,r}function oo(r,e){var t=Math.sin(e),n=Math.cos(e);return r[0]=n,r[1]=t,r[3]=-t,r[4]=n,r}function so(r,e,t){return r[6]=e,r[7]=t,r}function Je(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],s=r[4],a=r[5],u=r[6],h=r[7],l=r[8],c=e[0],d=e[1],f=e[2],g=e[3],p=e[4],v=e[5],w=e[6],m=e[7],y=e[8];return r[0]=c*t+d*o+f*u,r[1]=c*n+d*s+f*h,r[2]=c*i+d*a+f*l,r[3]=g*t+p*o+v*u,r[4]=g*n+p*s+v*h,r[5]=g*i+p*a+v*l,r[6]=w*t+m*o+y*u,r[7]=w*n+m*s+y*h,r[8]=w*i+m*a+y*l,r}function Bn(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=r[0],i=r[1],o=r[3],s=r[4],a=r[6],u=r[7],h=e.x,l=e.y;return{x:h*n+l*o+a*t,y:h*i+l*s+u*t}}function Td(r,e){var t=r.height/r.width,n=e.height/e.width;return t<1&&n>1||t>1&&n<1?1:Math.min(Math.max(n,1/n),Math.max(1/t,t))}function Yt(r,e,t,n,i){var o=r.angle,s=r.ratio,a=r.x,u=r.y,h=e.width,l=e.height,c=Ae(),d=Math.min(h,l)-2*n,f=Td(e,t);return i?(Je(c,so(Ae(),a,u)),Je(c,_r(Ae(),s)),Je(c,oo(Ae(),o)),Je(c,_r(Ae(),h/d/2/f,l/d/2/f))):(Je(c,_r(Ae(),2*(d/h)*f,2*(d/l)*f)),Je(c,oo(Ae(),-o)),Je(c,_r(Ae(),1/s)),Je(c,so(Ae(),-a,-u))),c}function Sd(r,e,t){var n=Bn(r,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),i=n.x,o=n.y;return 1/Math.sqrt(Math.pow(i,2)+Math.pow(o,2))/t.width}function Cd(r){if(!r.order)return{x:[0,1],y:[0,1]};var e=1/0,t=-1/0,n=1/0,i=-1/0;return r.forEachNode(function(o,s){var a=s.x,u=s.y;a<e&&(e=a),a>t&&(t=a),u<n&&(n=u),u>i&&(i=u)}),{x:[e,t],y:[n,i]}}function Rd(r){if(!$l(r))throw new Error("Sigma: invalid graph instance.");r.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function kd(r,e,t){var n=document.createElement(r);if(e)for(var i in e)n.style[i]=e[i];if(t)for(var o in t)n.setAttribute(o,t[o]);return n}function ao(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function uo(r,e,t){return t.sort(function(n,i){var o=e(n)||0,s=e(i)||0;return o<s?-1:o>s?1:0})}function ho(r){var e=Pt(r.x,2),t=e[0],n=e[1],i=Pt(r.y,2),o=i[0],s=i[1],a=Math.max(n-t,s-o),u=(n+t)/2,h=(s+o)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(u)&&(u=0),isNaN(h)&&(h=0);var l=function(d){return{x:.5+(d.x-u)/a,y:.5+(d.y-h)/a}};return l.applyTo=function(c){c.x=.5+(c.x-u)/a,c.y=.5+(c.y-h)/a},l.inverse=function(c){return{x:u+a*(c.x-.5),y:h+a*(c.y-.5)}},l.ratio=a,l}function zn(r){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(r)}function lo(r,e){var t=e.size;if(t!==0){var n=r.length;r.length+=t;var i=0;e.forEach(function(o){r[n+i]=o,i++})}}function wn(r){r=r||{};for(var e=0,t=arguments.length<=1?0:arguments.length-1;e<t;e++){var n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];n&&Object.assign(r,n)}return r}var _i={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:Vc,defaultDrawNodeLabel:oa,defaultDrawNodeHover:Kc,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},Dd={circle:tn},Ld={arrow:cd,line:pd};function bn(r){if(typeof r.labelDensity!="number"||r.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=r.minCameraRatio,t=r.maxCameraRatio;if(typeof e=="number"&&typeof t=="number"&&t<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Nd(r){var e=wn({},_i,r);return e.nodeProgramClasses=wn({},Dd,e.nodeProgramClasses),e.edgeProgramClasses=wn({},Ld,e.edgeProgramClasses),e}var Ar=1.5,co=function(r){function e(){var t;return te(this,e),t=ye(this,e),b(t,"x",.5),b(t,"y",.5),b(t,"angle",0),b(t,"ratio",1),b(t,"minRatio",null),b(t,"maxRatio",null),b(t,"enabledZooming",!0),b(t,"enabledPanning",!0),b(t,"enabledRotation",!0),b(t,"clean",null),b(t,"nextFrame",null),b(t,"previousState",null),b(t,"enabled",!0),t.previousState=t.getState(),t}return we(e,r),re(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(n){return this.x===n.x&&this.y===n.y&&this.ratio===n.ratio&&this.angle===n.angle}},{key:"getPreviousState",value:function(){var n=this.previousState;return n?{x:n.x,y:n.y,angle:n.angle,ratio:n.ratio}:null}},{key:"getBoundedRatio",value:function(n){var i=n;return typeof this.minRatio=="number"&&(i=Math.max(i,this.minRatio)),typeof this.maxRatio=="number"&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(n){var i={};return this.enabledPanning&&typeof n.x=="number"&&(i.x=n.x),this.enabledPanning&&typeof n.y=="number"&&(i.y=n.y),this.enabledZooming&&typeof n.ratio=="number"&&(i.ratio=this.getBoundedRatio(n.ratio)),this.enabledRotation&&typeof n.angle=="number"&&(i.angle=n.angle),this.clean?this.clean(x(x({},this.getState()),i)):i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(n){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(n);return typeof i.x=="number"&&(this.x=i.x),typeof i.y=="number"&&(this.y=i.y),typeof i.ratio=="number"&&(this.ratio=i.ratio),typeof i.angle=="number"&&(this.angle=i.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(n){return this.setState(n(this.getState())),this}},{key:"animate",value:function(n){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(f){return i.animate(n,o,f)});if(this.enabled){var a=x(x({},xd),o),u=this.validateState(n),h=typeof a.easing=="function"?a.easing:Ad[a.easing],l=Date.now(),c=this.getState(),d=function(){var g=(Date.now()-l)/a.duration;if(g>=1){i.nextFrame=null,i.setState(u),i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0);return}var p=h(g),v={};typeof u.x=="number"&&(v.x=c.x+(u.x-c.x)*p),typeof u.y=="number"&&(v.y=c.y+(u.y-c.y)*p),i.enabledRotation&&typeof u.angle=="number"&&(v.angle=c.angle+(u.angle-c.angle)*p),typeof u.ratio=="number"&&(v.ratio=c.ratio+(u.ratio-c.ratio)*p),i.setState(v),i.nextFrame=requestAnimationFrame(d)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(d)):d(),this.animationCallback=s}}},{key:"animatedZoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio/n}):this.animate({ratio:this.ratio/(n.factor||Ar)},n):this.animate({ratio:this.ratio/Ar})}},{key:"animatedUnzoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio*n}):this.animate({ratio:this.ratio*(n.factor||Ar)},n):this.animate({ratio:this.ratio*Ar})}},{key:"animatedReset",value:function(n){return this.animate({x:.5,y:.5,ratio:1,angle:0},n)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(n){var i=new e;return i.setState(n)}}])}(Ei);function Te(r,e){var t=e.getBoundingClientRect();return{x:r.clientX-t.left,y:r.clientY-t.top}}function Ue(r,e){var t=x(x({},Te(r,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:r});return t}function qt(r){var e="x"in r?r:x(x({},r.touches[0]||r.previousTouches[0]),{},{original:r.original,sigmaDefaultPrevented:r.sigmaDefaultPrevented,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function Fd(r,e){return x(x({},Ue(r,e)),{},{delta:ga(r)})}var Gd=2;function Cr(r){for(var e=[],t=0,n=Math.min(r.length,Gd);t<n;t++)e.push(r[t]);return e}function Xt(r,e,t){var n={touches:Cr(r.touches).map(function(i){return Te(i,t)}),previousTouches:e.map(function(i){return Te(i,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:r};return n}function ga(r){if(typeof r.deltaY<"u")return r.deltaY*-3/360;if(typeof r.detail<"u")return r.detail/-9;throw new Error("Captor: could not extract delta from event.")}var pa=function(r){function e(t,n){var i;return te(this,e),i=ye(this,e),i.container=t,i.renderer=n,i}return we(e,r),re(e)}(Ei),Pd=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Md=Pd.reduce(function(r,e){return x(x({},r),{},b({},e,_i[e]))},{}),Id=function(r){function e(t,n){var i;return te(this,e),i=ye(this,e,[t,n]),b(i,"enabled",!0),b(i,"draggedEvents",0),b(i,"downStartTime",null),b(i,"lastMouseX",null),b(i,"lastMouseY",null),b(i,"isMouseDown",!1),b(i,"isMoving",!1),b(i,"movingTimeout",null),b(i,"startCameraState",null),b(i,"clicks",0),b(i,"doubleClickTimeout",null),b(i,"currentWheelDirection",0),b(i,"settings",Md),i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleEnter=i.handleEnter.bind(i),t.addEventListener("click",i.handleClick,{capture:!1}),t.addEventListener("contextmenu",i.handleRightClick,{capture:!1}),t.addEventListener("mousedown",i.handleDown,{capture:!1}),t.addEventListener("wheel",i.handleWheel,{capture:!1}),t.addEventListener("mouseleave",i.handleLeave,{capture:!1}),t.addEventListener("mouseenter",i.handleEnter,{capture:!1}),document.addEventListener("mousemove",i.handleMove,{capture:!1}),document.addEventListener("mouseup",i.handleUp,{capture:!1}),i}return we(e,r),re(e,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("click",this.handleClick),n.removeEventListener("contextmenu",this.handleRightClick),n.removeEventListener("mousedown",this.handleDown),n.removeEventListener("wheel",this.handleWheel),n.removeEventListener("mouseleave",this.handleLeave),n.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(n){var i=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(n);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Ue(n,this.container))}}},{key:"handleRightClick",value:function(n){this.enabled&&this.emit("rightClick",Ue(n,this.container))}},{key:"handleDoubleClick",value:function(n){if(this.enabled){n.preventDefault(),n.stopPropagation();var i=Ue(n,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(Te(n,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(n){if(this.enabled){if(n.button===0){this.startCameraState=this.renderer.getCamera().getState();var i=Te(n,this.container),o=i.x,s=i.y;this.lastMouseX=o,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Ue(n,this.container))}}},{key:"handleUp",value:function(n){var i=this;if(!(!this.enabled||!this.isMouseDown)){var o=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=Te(n,this.container),a=s.x,u=s.y,h=o.getState(),l=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:h.x+this.settings.inertiaRatio*(h.x-l.x),y:h.y+this.settings.inertiaRatio*(h.y-l.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==u)&&o.setState({x:h.x,y:h.y}),this.isMoving=!1,setTimeout(function(){var c=i.draggedEvents>0;i.draggedEvents=0,c&&i.renderer.getSetting("hideEdgesOnMove")&&i.renderer.refresh()},0),this.emit("mouseup",Ue(n,this.container))}}},{key:"handleMove",value:function(n){var i=this;if(this.enabled){var o=Ue(n,this.container);if(this.emit("mousemovebody",o),(n.target===this.container||n.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),a=Te(n,this.container),u=a.x,h=a.y,l=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),c=this.renderer.viewportToFramedGraph({x:u,y:h}),d=l.x-c.x,f=l.y-c.y,g=s.getState(),p=g.x+d,v=g.y+f;s.setState({x:p,y:v}),this.lastMouseX=u,this.lastMouseY=h,n.preventDefault(),n.stopPropagation()}}}},{key:"handleLeave",value:function(n){this.emit("mouseleave",Ue(n,this.container))}},{key:"handleEnter",value:function(n){this.emit("mouseenter",Ue(n,this.container))}},{key:"handleWheel",value:function(n){var i=this,o=this.renderer.getCamera();if(!(!this.enabled||!o.enabledZooming)){var s=ga(n);if(s){var a=Fd(n,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented){n.preventDefault(),n.stopPropagation();return}var u=o.getState().ratio,h=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,l=o.getBoundedRatio(u*h),c=s>0?1:-1,d=Date.now();u!==l&&(n.preventDefault(),n.stopPropagation(),!(this.currentWheelDirection===c&&this.lastWheelTriggerTime&&d-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(o.animate(this.renderer.getViewportZoomedState(Te(n,this.container),l),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){i.currentWheelDirection=0}),this.currentWheelDirection=c,this.lastWheelTriggerTime=d))}}}},{key:"setSettings",value:function(n){this.settings=n}}])}(pa),Od=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],$d=Od.reduce(function(r,e){return x(x({},r),{},b({},e,_i[e]))},{}),Ud=function(r){function e(t,n){var i;return te(this,e),i=ye(this,e,[t,n]),b(i,"enabled",!0),b(i,"isMoving",!1),b(i,"hasMoved",!1),b(i,"touchMode",0),b(i,"startTouchesPositions",[]),b(i,"lastTouches",[]),b(i,"lastTap",null),b(i,"settings",$d),i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),t.addEventListener("touchstart",i.handleStart,{capture:!1}),t.addEventListener("touchcancel",i.handleLeave,{capture:!1}),document.addEventListener("touchend",i.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",i.handleMove,{capture:!1,passive:!1}),i}return we(e,r),re(e,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("touchstart",this.handleStart),n.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(n){var i=this;if(this.enabled){n.preventDefault();var o=Cr(n.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(f){return Te(f,i.container)}),this.touchMode===2){var s=Pt(this.startTouchesPositions,2),a=s[0],u=a.x,h=a.y,l=s[1],c=l.x,d=l.y;this.startTouchesAngle=Math.atan2(d-h,c-u),this.startTouchesDistance=Math.sqrt(Math.pow(c-u,2)+Math.pow(d-h,2))}this.emit("touchdown",Xt(n,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(n){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(n.cancelable&&n.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(n.touches.length===1){this.handleStart(n),n.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),o=i.getState(),s=i.getPreviousState()||{x:0,y:0};i.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Xt(n,this.lastTouches,this.container)),!n.touches.length){var a=Te(this.lastTouches[0],this.container),u=this.startTouchesPositions[0],h=Math.pow(a.x-u.x,2)+Math.pow(a.y-u.y,2);if(!n.touches.length&&h<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var l=Xt(n,this.lastTouches,this.container);if(this.emit("doubletap",l),this.lastTap=null,!l.sigmaDefaultPrevented){var c=this.renderer.getCamera(),d=c.getBoundedRatio(c.getState().ratio/this.settings.doubleClickZoomingRatio);c.animate(this.renderer.getViewportZoomedState(a,d),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Xt(n,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=Cr(n.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(n){var i=this;if(!(!this.enabled||!this.startTouchesPositions.length)){n.preventDefault();var o=Cr(n.touches),s=o.map(function(Xe){return Te(Xe,i.container)}),a=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=s;var u=Xt(n,a,this.container);if(this.emit("touchmove",u),!u.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(Xe,rn){var Ce=i.startTouchesPositions[rn];return Ce&&(Xe.x!==Ce.x||Xe.y!==Ce.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},this.settings.dragTimeout);var h=this.renderer.getCamera(),l=this.startCameraState,c=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=d.x,g=d.y,p=this.renderer.viewportToFramedGraph(s[0]),v=p.x,w=p.y;h.setState({x:l.x+f-v,y:l.y+g-w});break}case 2:{var m={x:.5,y:.5,angle:0,ratio:1},y=s[0],E=y.x,k=y.y,L=s[1],T=L.x,G=L.y,D=Math.atan2(G-k,T-E)-this.startTouchesAngle,z=Math.hypot(G-k,T-E)/this.startTouchesDistance,H=h.getBoundedRatio(l.ratio/z);m.ratio=H,m.angle=l.angle+D;var M=this.getDimensions(),ue=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:l}),P=Math.min(M.width,M.height)-2*c,V=P/M.width,se=P/M.height,gr=H/P,yt=E-P/2/V,it=k-P/2/se,qe=[yt*Math.cos(-m.angle)-it*Math.sin(-m.angle),it*Math.cos(-m.angle)+yt*Math.sin(-m.angle)];yt=qe[0],it=qe[1],m.x=ue.x-yt*gr,m.y=ue.y+it*gr,h.setState(m);break}}}}}},{key:"setSettings",value:function(n){this.settings=n}}])}(pa);function Bd(r){if(Array.isArray(r))return $n(r)}function zd(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Hd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fo(r){return Bd(r)||zd(r)||Js(r)||Hd()}function Wd(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function En(r,e){if(r==null)return{};var t,n,i=Wd(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var go=function(){function r(e,t){te(this,r),this.key=e,this.size=t}return re(r,null,[{key:"compare",value:function(t,n){return t.size>n.size?-1:t.size<n.size||t.key>n.key?1:-1}}])}(),po=function(){function r(){te(this,r),b(this,"width",0),b(this,"height",0),b(this,"cellSize",0),b(this,"columns",0),b(this,"rows",0),b(this,"cells",{})}return re(r,[{key:"resizeAndClear",value:function(t,n){this.width=t.width,this.height=t.height,this.cellSize=n,this.columns=Math.ceil(t.width/n),this.rows=Math.ceil(t.height/n),this.cells={}}},{key:"getIndex",value:function(t){var n=Math.floor(t.x/this.cellSize),i=Math.floor(t.y/this.cellSize);return i*this.columns+n}},{key:"add",value:function(t,n,i){var o=new go(t,n),s=this.getIndex(i),a=this.cells[s];a||(a=[],this.cells[s]=a),a.push(o)}},{key:"organize",value:function(){for(var t in this.cells){var n=this.cells[t];n.sort(go.compare)}}},{key:"getLabelsToDisplay",value:function(t,n){var i=this.cellSize*this.cellSize,o=i/t/t,s=o*n/i,a=Math.ceil(s),u=[];for(var h in this.cells)for(var l=this.cells[h],c=0;c<Math.min(a,l.length);c++)u.push(l[c].key);return u}}])}();function jd(r){var e=r.graph,t=r.hoveredNode,n=r.highlightedNodes,i=r.displayedNodeLabels,o=[];return e.forEachEdge(function(s,a,u,h){(u===t||h===t||n.has(u)||n.has(h)||i.has(u)&&i.has(h))&&o.push(s)}),o}var vo=150,mo=50,Be=Object.prototype.hasOwnProperty;function Vd(r,e,t){if(!Be.call(t,"x")||!Be.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=r.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),Be.call(t,"hidden")||(t.hidden=!1),Be.call(t,"highlighted")||(t.highlighted=!1),Be.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultNodeType),t.zIndex||(t.zIndex=0),t}function Kd(r,e,t){return t.color||(t.color=r.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),Be.call(t,"hidden")||(t.hidden=!1),Be.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var Yd=function(r){function e(t,n){var i,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(te(this,e),i=ye(this,e),b(i,"elements",{}),b(i,"canvasContexts",{}),b(i,"webGLContexts",{}),b(i,"pickingLayers",new Set),b(i,"textures",{}),b(i,"frameBuffers",{}),b(i,"activeListeners",{}),b(i,"labelGrid",new po),b(i,"nodeDataCache",{}),b(i,"edgeDataCache",{}),b(i,"nodeProgramIndex",{}),b(i,"edgeProgramIndex",{}),b(i,"nodesWithForcedLabels",new Set),b(i,"edgesWithForcedLabels",new Set),b(i,"nodeExtent",{x:[0,1],y:[0,1]}),b(i,"nodeZExtent",[1/0,-1/0]),b(i,"edgeZExtent",[1/0,-1/0]),b(i,"matrix",Ae()),b(i,"invMatrix",Ae()),b(i,"correctionRatio",1),b(i,"customBBox",null),b(i,"normalizationFunction",ho({x:[0,1],y:[0,1]})),b(i,"graphToViewportRatio",1),b(i,"itemIDsIndex",{}),b(i,"nodeIndices",{}),b(i,"edgeIndices",{}),b(i,"width",0),b(i,"height",0),b(i,"pixelRatio",ao()),b(i,"pickingDownSizingRatio",2*i.pixelRatio),b(i,"displayedNodeLabels",new Set),b(i,"displayedEdgeLabels",new Set),b(i,"highlightedNodes",new Set),b(i,"hoveredNode",null),b(i,"hoveredEdge",null),b(i,"renderFrame",null),b(i,"renderHighlightedNodesFrame",null),b(i,"needToProcess",!1),b(i,"checkEdgesEventsFrame",null),b(i,"nodePrograms",{}),b(i,"nodeHoverPrograms",{}),b(i,"edgePrograms",{}),i.settings=Nd(o),bn(i.settings),Rd(t),!(n instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=t,i.container=n,i.createWebGLContext("edges",{picking:o.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),i.resize();for(var s in i.settings.nodeProgramClasses)i.registerNodeProgram(s,i.settings.nodeProgramClasses[s],i.settings.nodeHoverProgramClasses[s]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new co,i.bindCameraHandlers(),i.mouseCaptor=new Id(i.elements.mouse,i),i.mouseCaptor.setSettings(i.settings),i.touchCaptor=new Ud(i.elements.mouse,i),i.touchCaptor.setSettings(i.settings),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return we(e,r),re(e,[{key:"registerNodeProgram",value:function(n,i,o){return this.nodePrograms[n]&&this.nodePrograms[n].kill(),this.nodeHoverPrograms[n]&&this.nodeHoverPrograms[n].kill(),this.nodePrograms[n]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[n]=new(o||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(n,i){return this.edgePrograms[n]&&this.edgePrograms[n].kill(),this.edgePrograms[n]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(n){if(this.nodePrograms[n]){var i=this.nodePrograms,o=i[n],s=En(i,[n].map(Jt));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[n]){var a=this.nodeHoverPrograms,u=a[n],h=En(a,[n].map(Jt));u.kill(),this.nodePrograms=h}return this}},{key:"unregisterEdgeProgram",value:function(n){if(this.edgePrograms[n]){var i=this.edgePrograms,o=i[n],s=En(i,[n].map(Jt));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(n){var i=this.webGLContexts[n],o=this.frameBuffers[n],s=this.textures[n];s&&i.deleteTexture(s);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,o),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[n]=a,this}},{key:"bindCameraHandlers",value:function(){var n=this;return this.activeListeners.camera=function(){n.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(n){var i=n.x,o=n.y,s=Zi(this.webGLContexts.nodes,this.frameBuffers.nodes,i,o,this.pixelRatio,this.pickingDownSizingRatio),a=Xi.apply(void 0,fo(s)),u=this.itemIDsIndex[a];return u&&u.type==="node"?u.id:null}},{key:"bindEventHandlers",value:function(){var n=this;this.activeListeners.handleResize=function(){n.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s=qt(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},u=n.getNodeAtPosition(s);if(u&&n.hoveredNode!==u&&!n.nodeDataCache[u].hidden){n.hoveredNode&&n.emit("leaveNode",x(x({},a),{},{node:n.hoveredNode})),n.hoveredNode=u,n.emit("enterNode",x(x({},a),{},{node:u})),n.scheduleHighlightedNodesRender();return}if(n.hoveredNode&&n.getNodeAtPosition(s)!==n.hoveredNode){var h=n.hoveredNode;n.hoveredNode=null,n.emit("leaveNode",x(x({},a),{},{node:h})),n.scheduleHighlightedNodesRender();return}if(n.settings.enableEdgeEvents){var l=n.hoveredNode?null:n.getEdgeAtPoint(a.event.x,a.event.y);l!==n.hoveredEdge&&(n.hoveredEdge&&n.emit("leaveEdge",x(x({},a),{},{edge:n.hoveredEdge})),l&&n.emit("enterEdge",x(x({},a),{},{edge:l})),n.hoveredEdge=l)}},this.activeListeners.handleMoveBody=function(o){var s=qt(o);n.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var s=qt(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};n.hoveredNode&&(n.emit("leaveNode",x(x({},a),{},{node:n.hoveredNode})),n.scheduleHighlightedNodesRender()),n.settings.enableEdgeEvents&&n.hoveredEdge&&(n.emit("leaveEdge",x(x({},a),{},{edge:n.hoveredEdge})),n.scheduleHighlightedNodesRender()),n.emit("leaveStage",x({},a))},this.activeListeners.handleEnter=function(o){var s=qt(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};n.emit("enterStage",x({},a))};var i=function(s){return function(a){var u=qt(a),h={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},l=n.getNodeAtPosition(u);if(l)return n.emit("".concat(s,"Node"),x(x({},h),{},{node:l}));if(n.settings.enableEdgeEvents){var c=n.getEdgeAtPoint(u.x,u.y);if(c)return n.emit("".concat(s,"Edge"),x(x({},h),{},{edge:c}))}return n.emit("".concat(s,"Stage"),h)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var n=this,i=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,u=(a=s.hints)===null||a===void 0?void 0:a.attributes;n.graph.forEachNode(function(l){return n.updateNode(l)});var h=!u||u.some(function(l){return o.has(l)});n.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!h,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,u=(a=s.hints)===null||a===void 0?void 0:a.attributes;n.graph.forEachEdge(function(l){return n.updateEdge(l)});var h=u&&["zIndex","type"].some(function(l){return u==null?void 0:u.includes(l)});n.refresh({partialGraph:{edges:i.edges()},skipIndexation:!h,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;n.addNode(a),n.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){var a=s.key;n.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){var a=s.key;n.removeNode(a),n.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;n.addEdge(a),n.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){var a=s.key;n.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){var a=s.key;n.removeEdge(a),n.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){n.clearEdgeState(),n.clearEdgeIndices(),n.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){n.clearEdgeState(),n.clearNodeState(),n.clearEdgeIndices(),n.clearNodeIndices(),n.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var n=this.graph;n.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(n,i){var o=Zi(this.webGLContexts.edges,this.frameBuffers.edges,n,i,this.pixelRatio,this.pickingDownSizingRatio),s=Xi.apply(void 0,fo(o)),a=this.itemIDsIndex[s];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var n=this;this.emit("beforeProcess");var i=this.graph,o=this.settings,s=this.getDimensions();if(this.nodeExtent=Cd(this.graph),!this.settings.autoRescale){var a=s.width,u=s.height,h=this.nodeExtent,l=h.x,c=h.y;this.nodeExtent={x:[(l[0]+l[1])/2-a/2,(l[0]+l[1])/2+a/2],y:[(c[0]+c[1])/2-u/2,(c[0]+c[1])/2+u/2]}}this.normalizationFunction=ho(this.customBBox||this.nodeExtent);var d=new co,f=Yt(d.getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var g={},p={},v={},w={},m=1,y=i.nodes(),E=0,k=y.length;E<k;E++){var L=y[E],T=this.nodeDataCache[L],G=i.getNodeAttributes(L);T.x=G.x,T.y=G.y,this.normalizationFunction.applyTo(T),typeof T.label=="string"&&!T.hidden&&this.labelGrid.add(L,T.size,this.framedGraphToViewport(T,{matrix:f})),g[T.type]=(g[T.type]||0)+1}this.labelGrid.organize();for(var D in this.nodePrograms){if(!Be.call(this.nodePrograms,D))throw new Error('Sigma: could not find a suitable program for node type "'.concat(D,'"!'));this.nodePrograms[D].reallocate(g[D]||0),g[D]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(y=uo(this.nodeZExtent,function(nn){return n.nodeDataCache[nn].zIndex},y));for(var z=0,H=y.length;z<H;z++){var M=y[z];p[M]=m,w[p[M]]={type:"node",id:M},m++;var ue=this.nodeDataCache[M];this.addNodeToProgram(M,p[M],g[ue.type]++)}for(var P={},V=i.edges(),se=0,gr=V.length;se<gr;se++){var yt=V[se],it=this.edgeDataCache[yt];P[it.type]=(P[it.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(V=uo(this.edgeZExtent,function(nn){return n.edgeDataCache[nn].zIndex},V));for(var qe in this.edgePrograms){if(!Be.call(this.edgePrograms,qe))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(qe,'"!'));this.edgePrograms[qe].reallocate(P[qe]||0),P[qe]=0}for(var Xe=0,rn=V.length;Xe<rn;Xe++){var Ce=V[Xe];v[Ce]=m,w[v[Ce]]={type:"edge",id:Ce},m++;var va=this.edgeDataCache[Ce];this.addEdgeToProgram(Ce,v[Ce],P[va.type]++)}return this.itemIDsIndex=w,this.nodeIndices=p,this.edgeIndices=v,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(n){var i=this,o=this.settings;if(this.camera.minRatio=o.minCameraRatio,this.camera.maxRatio=o.maxCameraRatio,this.camera.enabledZooming=o.enableCameraZooming,this.camera.enabledPanning=o.enableCameraPanning,this.camera.enabledRotation=o.enableCameraRotation,o.cameraPanBoundaries?this.camera.clean=function(l){return i.cleanCameraState(l,o.cameraPanBoundaries&&zn(o.cameraPanBoundaries)==="object"?o.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),n){if(n.edgeProgramClasses!==o.edgeProgramClasses){for(var s in o.edgeProgramClasses)o.edgeProgramClasses[s]!==n.edgeProgramClasses[s]&&this.registerEdgeProgram(s,o.edgeProgramClasses[s]);for(var a in n.edgeProgramClasses)o.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(n.nodeProgramClasses!==o.nodeProgramClasses||n.nodeHoverProgramClasses!==o.nodeHoverProgramClasses){for(var u in o.nodeProgramClasses)(o.nodeProgramClasses[u]!==n.nodeProgramClasses[u]||o.nodeHoverProgramClasses[u]!==n.nodeHoverProgramClasses[u])&&this.registerNodeProgram(u,o.nodeProgramClasses[u],o.nodeHoverProgramClasses[u]);for(var h in n.nodeProgramClasses)o.nodeProgramClasses[h]||this.unregisterNodeProgram(h)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.tolerance,s=o===void 0?0:o,a=i.boundaries,u=x({},n),h=a||this.nodeExtent,l=Pt(h.x,2),c=l[0],d=l[1],f=Pt(h.y,2),g=f[0],p=f[1],v=[this.graphToViewport({x:c,y:g},{cameraState:n}),this.graphToViewport({x:d,y:g},{cameraState:n}),this.graphToViewport({x:c,y:p},{cameraState:n}),this.graphToViewport({x:d,y:p},{cameraState:n})],w=1/0,m=-1/0,y=1/0,E=-1/0;v.forEach(function(P){var V=P.x,se=P.y;w=Math.min(w,V),m=Math.max(m,V),y=Math.min(y,se),E=Math.max(E,se)});var k=m-w,L=E-y,T=this.getDimensions(),G=T.width,D=T.height,z=0,H=0;if(k>=G?m<G-s?z=m-(G-s):w>s&&(z=w-s):m>G+s?z=m-(G+s):w<-s&&(z=w+s),L>=D?E<D-s?H=E-(D-s):y>s&&(H=y-s):E>D+s?H=E-(D+s):y<-s&&(H=y+s),z||H){var M=this.viewportToFramedGraph({x:0,y:0},{cameraState:n}),ue=this.viewportToFramedGraph({x:z,y:H},{cameraState:n});z=ue.x-M.x,H=ue.y-M.y,u.x+=z,u.y+=H}return u}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var n=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(n.ratio,this.settings.labelDensity);lo(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=i.length;s<a;s++){var u=i[s],h=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!h.hidden){var l=this.framedGraphToViewport(h),c=l.x,d=l.y,f=this.scaleSize(h.size);if(!(!h.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(c<-vo||c>this.width+vo||d<-mo||d>this.height+mo)){this.displayedNodeLabels.add(u);var g=this.settings.defaultDrawNodeLabel,p=this.nodePrograms[h.type],v=(p==null?void 0:p.drawLabel)||g;v(o,x(x({key:u},h),{},{size:f,x:c,y:d}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var n=this.canvasContexts.edgeLabels;n.clearRect(0,0,this.width,this.height);var i=jd({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});lo(i,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=i.length;s<a;s++){var u=i[s],h=this.graph.extremities(u),l=this.nodeDataCache[h[0]],c=this.nodeDataCache[h[1]],d=this.edgeDataCache[u];if(!o.has(u)&&!(d.hidden||l.hidden||c.hidden)){var f=this.settings.defaultDrawEdgeLabel,g=this.edgePrograms[d.type],p=(g==null?void 0:g.drawLabel)||f;p(n,x(x({key:u},d),{},{size:this.scaleSize(d.size)}),x(x(x({key:h[0]},l),this.framedGraphToViewport(l)),{},{size:this.scaleSize(l.size)}),x(x(x({key:h[1]},c),this.framedGraphToViewport(c)),{},{size:this.scaleSize(c.size)}),this.settings),o.add(u)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var n=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var o=function(f){var g=n.nodeDataCache[f],p=n.framedGraphToViewport(g),v=p.x,w=p.y,m=n.scaleSize(g.size),y=n.settings.defaultDrawNodeHover,E=n.nodePrograms[g.type],k=(E==null?void 0:E.drawHover)||y;k(i,x(x({key:f},g),{},{size:m,x:v,y:w}),n.settings)},s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==n.hoveredNode&&s.push(d)}),s.forEach(function(d){return o(d)});var a={};s.forEach(function(d){var f=n.nodeDataCache[d].type;a[f]=(a[f]||0)+1});for(var u in this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(a[u]||0),a[u]=0;s.forEach(function(d){var f=n.nodeDataCache[d];n.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var h=this.getRenderParams();for(var l in this.nodeHoverPrograms){var c=this.nodeHoverPrograms[l];c.render(h)}}},{key:"scheduleHighlightedNodesRender",value:function(){var n=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){n.renderHighlightedNodesFrame=null,n.renderHighlightedNodes(),n.renderEdgeLabels()}))}},{key:"render",value:function(){var n=this;this.emit("beforeRender");var i=function(){return n.emit("afterRender"),n};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(v){return n.resetWebGLTexture(v)}),!this.graph.order)return i();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),u=this.getDimensions(),h=this.getGraphDimensions(),l=this.getStagePadding();this.matrix=Yt(a,u,h,l),this.invMatrix=Yt(a,u,h,l,!0),this.correctionRatio=Sd(this.matrix,a,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var c=this.getRenderParams();for(var d in this.nodePrograms){var f=this.nodePrograms[d];f.render(c)}if(!this.settings.hideEdgesOnMove||!s)for(var g in this.edgePrograms){var p=this.edgePrograms[g];p.render(c)}return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(n){var i=Object.assign({},this.graph.getNodeAttributes(n));this.settings.nodeReducer&&(i=this.settings.nodeReducer(n,i));var o=Vd(this.settings,n,i);this.nodeDataCache[n]=o,this.nodesWithForcedLabels.delete(n),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(n),this.highlightedNodes.delete(n),o.highlighted&&!o.hidden&&this.highlightedNodes.add(n),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(n){this.addNode(n);var i=this.nodeDataCache[n];this.normalizationFunction.applyTo(i)}},{key:"removeNode",value:function(n){delete this.nodeDataCache[n],delete this.nodeProgramIndex[n],this.highlightedNodes.delete(n),this.hoveredNode===n&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(n)}},{key:"addEdge",value:function(n){var i=Object.assign({},this.graph.getEdgeAttributes(n));this.settings.edgeReducer&&(i=this.settings.edgeReducer(n,i));var o=Kd(this.settings,n,i);this.edgeDataCache[n]=o,this.edgesWithForcedLabels.delete(n),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(n),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(n){this.addEdge(n)}},{key:"removeEdge",value:function(n){delete this.edgeDataCache[n],delete this.edgeProgramIndex[n],this.hoveredEdge===n&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(n)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new po,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(n,i,o){var s=this.nodeDataCache[n],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(i,o,s),this.nodeProgramIndex[n]=o}},{key:"addEdgeToProgram",value:function(n,i,o){var s=this.edgeDataCache[n],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var u=this.graph.extremities(n),h=this.nodeDataCache[u[0]],l=this.nodeDataCache[u[1]];a.process(i,o,h,l,s),this.edgeProgramIndex[n]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var n=this.settings,i=n.stagePadding,o=n.autoRescale;return o&&i||0}},{key:"createLayer",value:function(n,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[n])throw new Error('Sigma: a layer named "'.concat(n,'" already exists'));var s=kd(i,{position:"absolute"},{class:"sigma-".concat(n)});return o.style&&Object.assign(s.style,o.style),this.elements[n]=s,"beforeLayer"in o&&o.beforeLayer?this.elements[o.beforeLayer].before(s):"afterLayer"in o&&o.afterLayer?this.elements[o.afterLayer].after(s):this.container.appendChild(s),s}},{key:"createCanvas",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(n,"canvas",i)}},{key:"createCanvasContext",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.createCanvas(n,i),s={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[n]=o.getContext("2d",s),this}},{key:"createWebGLContext",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=(i==null?void 0:i.canvas)||this.createCanvas(n,i);i.hidden&&o.remove();var s=x({preserveDrawingBuffer:!1,antialias:!1},i),a;a=o.getContext("webgl2",s),a||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var u=a;if(this.webGLContexts[n]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(n);var h=u.createFramebuffer();if(!h)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(n));this.frameBuffers[n]=h}return u}},{key:"killLayer",value:function(n){var i=this.elements[n];if(!i)throw new Error("Sigma: cannot kill layer ".concat(n,", which does not exist"));if(this.webGLContexts[n]){var o,s=this.webGLContexts[n];(o=s.getExtension("WEBGL_lose_context"))===null||o===void 0||o.loseContext(),delete this.webGLContexts[n]}else this.canvasContexts[n]&&delete this.canvasContexts[n];return i.remove(),delete this.elements[n],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(n){this.unbindCameraHandlers(),this.camera=n,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(n){n!==this.graph&&(this.hoveredNode&&!n.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!n.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=n,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var n=this.customBBox||this.nodeExtent;return{width:n.x[1]-n.x[0]||1,height:n.y[1]-n.y[0]||1}}},{key:"getNodeDisplayData",value:function(n){var i=this.nodeDataCache[n];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(n){var i=this.edgeDataCache[n];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return x({},this.settings)}},{key:"getSetting",value:function(n){return this.settings[n]}},{key:"setSetting",value:function(n,i){var o=x({},this.settings);return this.settings[n]=i,bn(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(n,i){return this.setSetting(n,i(this.settings[n])),this}},{key:"setSettings",value:function(n){var i=x({},this.settings);return this.settings=x(x({},this.settings),n),bn(this.settings),this.handleSettingsUpdate(i),this.scheduleRefresh(),this}},{key:"resize",value:function(n){var i=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=ao(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!n&&i===this.width&&o===this.height)return this;for(var s in this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var u in this.canvasContexts)this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[u].scale(this.pixelRatio,this.pixelRatio);for(var h in this.webGLContexts){this.elements[h].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[h].setAttribute("height",this.height*this.pixelRatio+"px");var l=this.webGLContexts[h];if(l.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(h)){var c=this.textures[h];c&&l.deleteTexture(c)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(n){var i=this,o=(n==null?void 0:n.skipIndexation)!==void 0?n==null?void 0:n.skipIndexation:!1,s=(n==null?void 0:n.schedule)!==void 0?n.schedule:!1,a=!n||!n.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(E){return i.addNode(E)}),this.graph.forEachEdge(function(E){return i.addEdge(E)});else{for(var u,h,l=((u=n.partialGraph)===null||u===void 0?void 0:u.nodes)||[],c=0,d=(l==null?void 0:l.length)||0;c<d;c++){var f=l[c];if(this.updateNode(f),o){var g=this.nodeProgramIndex[f];if(g===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],g)}}for(var p=(n==null||(h=n.partialGraph)===null||h===void 0?void 0:h.edges)||[],v=0,w=p.length;v<w;v++){var m=p[v];if(this.updateEdge(m),o){var y=this.edgeProgramIndex[m];if(y===void 0)throw new Error('Sigma: edge "'.concat(m,`" can't be repaint`));this.addEdgeToProgram(m,this.edgeIndices[m],y)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var n=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){n.render()})),this}},{key:"scheduleRefresh",value:function(n){return this.refresh(x(x({},n),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(n,i){var o=this.camera.getState(),s=o.ratio,a=o.angle,u=o.x,h=o.y,l=this.settings,c=l.minCameraRatio,d=l.maxCameraRatio;typeof d=="number"&&(i=Math.min(i,d)),typeof c=="number"&&(i=Math.max(i,c));var f=i/s,g={x:this.width/2,y:this.height/2},p=this.viewportToFramedGraph(n),v=this.viewportToFramedGraph(g);return{angle:a,x:(p.x-v.x)*(1-f)+u,y:(p.y-v.y)*(1-f)+h,ratio:i}}},{key:"viewRectangle",value:function(){var n=this.viewportToFramedGraph({x:0,y:0}),i=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:n.x,y1:n.y,x2:i.x,y2:i.y,height:i.y-o.y}}},{key:"framedGraphToViewport",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!i.cameraState||!!i.viewportDimensions||!!i.graphDimensions,s=i.matrix?i.matrix:o?Yt(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding()):this.matrix,a=Bn(s,n);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=!!i.cameraState||!!i.viewportDimensions||!i.graphDimensions,s=i.matrix?i.matrix:o?Yt(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding(),!0):this.invMatrix,a=Bn(s,{x:n.x/this.width*2-1,y:1-n.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(n,i))}},{key:"graphToViewport",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(n),i)}},{key:"getGraphToViewportRatio",value:function(){var n={x:0,y:0},i={x:1,y:1},o=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2)),s=this.graphToViewport(n),a=this.graphToViewport(i),u=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return u/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(n){return this.customBBox=n,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var n=this.container;n.firstChild;)n.removeChild(n.firstChild);for(var i in this.nodePrograms)this.nodePrograms[i].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return n/this.settings.zoomToSizeRatioFunction(i)*(this.getSetting("itemSizesReference")==="positions"?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var n={};for(var i in this.elements)this.elements[i]instanceof HTMLCanvasElement&&(n[i]=this.elements[i]);return n}}])}(Ei),qd=Yd,Xd=$t('<div style="width:100%;height:600px;border-radius:12px;border:1px solid #e2e8f0"></div>');function Zd(r,e){Do(e,!1);let t=Bu(e,"data",8,null),n=xt(),i=null;ei(()=>{if(!t())return;const s=new I({type:"undirected",allowSelfLoops:!0});t().nodes.forEach(a=>{var u;s.addNode(a.id,{label:((u=a.properties)==null?void 0:u.name)??a.id,x:a.x??Math.random()*10,y:a.y??Math.random()*10,size:a.size,color:"#334155",raw:a})}),t().edges.forEach(a=>{s.hasNode(a.source)&&s.hasNode(a.target)&&s.addEdgeWithKey(a.id,a.source,a.target,{label:a.type,color:"#94a3b8",raw:a})}),i=new qd(s,U(n),{renderLabels:!0})}),Ru(()=>{i==null||i.kill(),i=null}),os();var o=Xd();Pu(o,s=>ce(n,s),()=>U(n)),Et(r,o),Lo()}var Jd=$t("<p>Loading graph data</p>"),Qd=$t('<li><button style="border:none;background:none;color:#2563eb;cursor:pointer"> </button></li>'),ef=$t('<ul style="margin-top:0.75rem;max-height:200px;overflow:auto"></ul>'),tf=$t('<p> </p> <div style="display:grid;grid-template-columns:320px 1fr;gap:1rem"><aside style="background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:1rem"><input placeholder="Search nodes..." type="search" style="width:100%;padding:0.45rem;border:1px solid #cbd5f5;border-radius:8px"/> <!></aside> <section><!></section></div>',1),rf=$t('<div class="app"><h1>Deadlock Graph Explorer (Svelte)</h1> <!></div>');function nf(r,e){Do(e,!1);const t=()=>ln(wi,"$graphData",o),n=()=>ln(Sc,"$searchResults",o),i=()=>ln(In,"$searchTerm",o),[o,s]=$u(),a=xt(),u=xt();let h=xt(null);ei(async()=>{const p=await(await fetch("graph.json",{cache:"no-store"})).json();Cc(p),ce(h,p),window.__GRAPH_DATA__=p}),Ri(()=>t(),()=>{ce(a,t())}),Ri(()=>n(),()=>{ce(u,n())}),du(),os();var l=rf(),c=vr(ot(l),2);{var d=g=>{var p=Jd();Et(g,p)},f=g=>{var p=tf(),v=ou(p),w=ot(v),m=vr(v,2),y=ot(m),E=ot(y),k=vr(E,2);{var L=D=>{var z=ef();Nu(z,5,()=>U(u),Du,(H,M)=>{var ue=Qd(),P=ot(ue),V=ot(P);ki(()=>Pi(V,(U(M),Se(()=>{var se;return((se=U(M).properties)==null?void 0:se.name)??U(M).id})))),xu("click",P,()=>xc.set(U(M).id)),Et(H,ue)}),Et(D,z)};Mi(k,D=>{i()&&D(L)})}var T=vr(y,2),G=ot(T);Zd(G,{get data(){return U(h)}}),ki(D=>Pi(w,`Generated: ${D??""}  Nodes: ${U(a),Se(()=>U(a).meta.node_count)??""}  Edges: ${U(a),Se(()=>U(a).meta.edge_count)??""}`),[()=>(U(a),Se(()=>new Date(U(a).meta.generated_at).toLocaleString()))]),Gu(E,i,D=>Ou(In,D)),Et(g,p)};Mi(c,g=>{U(a)?g(f,!1):g(d)})}Et(r,l),Lo(),s()}new nf({target:document.getElementById("app")});

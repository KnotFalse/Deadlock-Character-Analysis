# Session Log - UI/UX bugfix + a11y pass

Repo: deadlock-character-analysis
Branch: feature/ui-bugfix-and-ux-pass @ 317b6cb
Date: 2025-10-27T22:17:34

## Changes
- GraphView: store baseSize; recompute sizes from base each pass; subscribe to visibleNodeIds/filteredEdges and set hidden on nodes/edges.
- UI: Combobox polish (no bullets, focus retention); sidebar density pass; Relationship panel → 3-column grid with headings.
- Path Tools: converted Start/End selects to Combobox; list height ~60vh; keep action buttons inline.
- Analytics: display human names from node.properties.name in rankings.
- Tests: updated smoke + no-path for new path combobox.

## Next
- Label legibility in dark mode (disable white hover bg; theme-driven).
- Mobile polish + disclosure defaults; a11y runes for combobox (aria-activedescendant).
- Add new specs: size inflation prevention; filter visibility counts; dark-mode label check; relationship headings include selected name.

## Recent Commits
317b6cb feat(graph): fix node size inflation via baseSize; hook filtered visibility (nodes/edges)\n\nfeat(ui): combobox UX polish (no bullets, focus retention); sidebar density tweaks; relationship panel 3-column layout with headings\n\nfeat(path): convert Start/End selects to Combobox with scroll; adjust tests for path combobox\n\nfeat(analytics): show human names in rankings\n\nchore: minor CSS for rel grid and combobox list height
cee6d2e docs(plan): add NEXT-STEPS-UI-UX and handoff log; link plan addendum
2353545 chore(logs): record combobox clear() fix on main
ea5b6d6 fix(combobox): clear() should call props.onSelect, not undefined onSelect identifier (prevents ReferenceError on ├ù)
8be40c1 Feature/style polish (#9)
0695ef6 Style polish: dark theme, cards, legend, readable graph (#6)
0b57274 feat(export): aggregate edges by (type,source,target); merge evidence_count/reasons/ability_sources; drop redundant EVEN\nfeat(validator): strict duplicate checks + Windows-friendly env via cross-env\nci: run strict validator in export & build workflows\nui: show aggregated reasons and evidence_count in RelationshipPanel\ndocs: document aggregation and CI gates (#5)
ef99c56 fix(graph): also dedupe edges by node pair to avoid simple-graph multi-edge errors
ec0702b fix(graph): skip duplicate edges by key when building Sigma graph (guards against duplicate ids in export)
ea0e6f7 docs(readme): SvelteKit is live on Pages; update deploy docs\nchore(pages): touch robots.txt to trigger deploy\nchore(logs): add session log

## Recent Commits (updated)
10daf22 test: add relationship headings and path combobox specs; update smoke/no-path for combobox path tools
12faa0f docs(ui-ux): progress note for phases 1ΓÇô3,6; outline pending work
317b6cb feat(graph): fix node size inflation via baseSize; hook filtered visibility (nodes/edges)\n\nfeat(ui): combobox UX polish (no bullets, focus retention); sidebar density tweaks; relationship panel 3-column layout with headings\n\nfeat(path): convert Start/End selects to Combobox with scroll; adjust tests for path combobox\n\nfeat(analytics): show human names in rankings\n\nchore: minor CSS for rel grid and combobox list height
cee6d2e docs(plan): add NEXT-STEPS-UI-UX and handoff log; link plan addendum
2353545 chore(logs): record combobox clear() fix on main
ea5b6d6 fix(combobox): clear() should call props.onSelect, not undefined onSelect identifier (prevents ReferenceError on ├ù)
8be40c1 Feature/style polish (#9)
0695ef6 Style polish: dark theme, cards, legend, readable graph (#6)
0b57274 feat(export): aggregate edges by (type,source,target); merge evidence_count/reasons/ability_sources; drop redundant EVEN\nfeat(validator): strict duplicate checks + Windows-friendly env via cross-env\nci: run strict validator in export & build workflows\nui: show aggregated reasons and evidence_count in RelationshipPanel\ndocs: document aggregation and CI gates (#5)
ef99c56 fix(graph): also dedupe edges by node pair to avoid simple-graph multi-edge errors
